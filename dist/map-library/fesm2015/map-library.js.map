{"version":3,"file":"map-library.js","sources":["ng://map-library/lib/map-library.service.ts","ng://map-library/lib/map-library.component.ts","ng://map-library/lib/map-library.component.html","ng://map-library/lib/map-library.module.ts","ng://map-library/public-api.ts","ng://map-library/map-library.ts"],"sourcesContent":["import { Injectable } from '@angular/core';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class MapLibraryService {\n\n  constructor() { }\n}\n","import {\n  AfterViewInit,\n  Component,\n  HostListener,\n  ElementRef,\n  Output,\n  EventEmitter,\n  SimpleChanges\n} from \"@angular/core\";\nimport * as L from \"leaflet\";\nimport \"leaflet-control-geocoder\";\n\nexport enum CONST {\n  ZOOM_MAX = 18,\n  ZOOM_MIN = 2,\n  LAT_MAX = 85,\n}\n\n@Component({\n  selector: \"map-library\",\n  inputs: ['mapLat', 'mapLng', 'mapZoom', 'search', 'marker','focused'],\n  templateUrl: \"./map-library.component.html\",\n  styleUrls: [\"./map-library.component.css\",],\n})\n\nexport class MapLibraryComponent implements AfterViewInit {\n\n  // input values\n  public mapLat: number = 45;\n  public mapLng: number = 5;\n  public mapZoom: number = 5;\n  public search: String;\n  public marker: any;\n  public focused: boolean;\n\n  @Output() onchange = new EventEmitter<any>();\n  @Output() onselect = new EventEmitter<any>();\n\n  private map;\n  private geocoder;\n  private searchInput;\n  private searchBar;\n  private searchInputFocused = false;\n  private moveMode = true;\n  private moveShift;\n  public handleIcon = \"move\";\n  public handleMenuIcon = \"zoom\";\n  public displayMenu = \"\";\n  public choiseMenu = 1;\n  private navigate = false;\n  private navigateId = 0;\n\n  constructor(private elem: ElementRef) { }\n\n  ngAfterViewInit(): void {\n    // init map\n    this.initMap();\n    this.initInput();\n    this.setMoveShift();\n\n    // init display input request\n    this.setSearch(this.search);\n    this.setMarker(this.marker);\n    // send init event\n    setTimeout(() => {\n      this.sendModifications(\"\");\n    }, 2000)\n  }\n\n  private initMap(): void {\n    // init map\n    this.map = L.map(\"map\", {\n      attributionControl: false,\n      zoomControl: false,\n      center: [this.mapLat, this.mapLng],\n      zoom: this.mapZoom,\n    });\n    // display map\n    L.tileLayer(\"https://{s}.tile.osm.org/{z}/{x}/{y}.png\").addTo(this.map);\n    // disable keyboard\n    this.map.keyboard.disable();\n    // add search box\n    this.geocoder = L.Control.geocoder({\n      position: \"topleft\",\n      collapsed: false,\n      placeholder: \"Recherche...\",\n      defaultMarkGeocode: true,\n    }).addTo(this.map);\n  }\n\n  private setSearch(search): void {\n    if (this.search) {\n      // load searching\n      this.geocoder.setQuery(search)._geocode()\n      // search the first element\n      setTimeout(() => {\n        if (this.geocoder._results && this.geocoder._results.length) {\n          this.geocoder._geocodeResultSelected(this.geocoder._results[0])\n          this.geocoder._clearResults();\n        }\n      }, 2000);\n    }\n  }\n\n  // display markers\n  private mapMarkers = [];\n  private setMarker(marker): void {\n\n    this.cleanMarkers();\n    let i = 0;\n    marker.forEach(element => {\n      if (\"lat\" in element && \"lng\" in element) {\n        element.id = i;\n        if (!element.text && element.img) {\n          this.mapMarkers[i] = this.generateImageMarker(element)\n        } else if (!element.text) {\n          this.mapMarkers[i] = L.marker([element.lat, element.lng])\n        } else {\n          this.mapMarkers[i] = this.generateIconMarker(element)\n        }\n        this.mapMarkers[i].addTo(this.map);\n\n        if (this.navigate && this.mapLat == element.lat && this.mapLng == element.lng) {\n          this.navigateId = i\n          this.elem.nativeElement.querySelector(\"#marker_\" + this.navigateId).style.background = \"orange\";\n        }\n        i++;\n      }\n    });\n  }\n\n  // remove all markers to display news\n  private cleanMarkers() {\n    for (let i = 0; i < this.mapMarkers.length; i++) {\n      this.map.removeLayer(this.mapMarkers[i]);\n    }\n  }\n\n  // generate Marker\n  private generateIconMarker(element) {\n\n    // set html form\n    let html = `\n      <div class=\"marker\" id=\"marker_${element.id}\">\n        <div>${element.text}</div>\n        `+ (element.content ? `<span>${element.content}</span>` : ``) +\n        (element.img ? `<img src=\"${element.img}\"/>` : ``) + `\n      </div>`\n\n    // return leaflet marker\n    return new L.Marker([element.lat, element.lng], {\n      icon: new L.DivIcon({\n        className: '',\n        iconSize: [100, 70], // size of the icon\n        iconAnchor: [60, element.img ? 40 : 10],\n        html,\n      })\n    })\n  }\n\n  // generate image Marker\n  private generateImageMarker(element) {\n\n    // set html form\n    let html = `<img id=\"marker_${element.id}\" style=\"width:80px;\" src=\"${element.img}\"/>`\n\n    // return leaflet marker\n    return new L.Marker([element.lat, element.lng], {\n      icon: new L.DivIcon({\n        className: '',\n        iconSize: [80, 70], // size of the icon\n        iconAnchor: [45, element.img ? 40 : 10],\n        html,\n      })\n    })\n  }\n\n  /*************** components attributes events *************/\n\n  ngOnChanges(changes: SimpleChanges) {\n    if (this.map) {\n      switch (Object.keys(changes)[0]) {\n        case \"mapZoom\":\n        case \"mapLat\":\n        case \"mapLng\":\n          this.map.setView([this.mapLat, this.mapLng], this.mapZoom);\n          this.setMoveShift();\n          break;\n        case \"marker\":\n          this.setMarker(this.marker);\n          break;\n        case \"search\":\n          this.setSearch(this.search);\n          break;\n      }\n    }\n  }\n\n  /*************** keyboard event detect and functions *************/\n\n\n\n  @HostListener(\"window:keyup\", [\"$event\"])\n  keyEvent(event: KeyboardEvent) {\n    if(this.focused){\n      if (this.displayMenu != \"\") {\n        this.handlingMenu(event.key);\n\n      } else if (this.navigate) {\n        this.handlingNavigation(event.key)\n\n      } else {\n        this.handlingMap(event.key)\n        // send change to parent application\n        this.sendModifications(event.key);\n      }\n    }\n  }\n\n  private handlingNavigation(key): void {\n    switch (key) {\n      case \"ArrowUp\":\n        this.navigateMarker(1, 0)\n        break;\n      case \"ArrowDown\":\n        this.navigateMarker(-1, 0)\n        break;\n      case \"ArrowRight\":\n        this.navigateMarker(0, 1)\n        break;\n      case \"ArrowLeft\":\n        this.navigateMarker(0, -1)\n        break;\n      case \"Enter\":\n        // send change to parent application\n        if (this.marker[this.navigateId])\n          this.sendSelectEvent(this.marker[this.navigateId])\n        break;\n      case \"Escape\":\n        this.openMenu();\n        break;\n    }\n  }\n\n  private handlingMenu(key): void {\n    switch (key) {\n      case \"ArrowRight\":\n        this.choiseMenu++;\n        if (this.choiseMenu > 4) {\n          this.choiseMenu = 0;\n        }\n        break;\n      case \"ArrowLeft\":\n        this.choiseMenu--;\n        if (this.choiseMenu < 0) {\n          this.choiseMenu = 4;\n        }\n        break;\n      case \"Enter\":\n        // reset navigation mode\n        this.navigate = false;\n\n        if (this.choiseMenu == 0) {\n          this.setFocus()\n        } else {\n          this.setFocusOut();\n        }\n        if (this.choiseMenu == 1) {\n          this.handleIcon = \"move\";\n          this.moveMode = true\n\n        } else if (this.choiseMenu == 2) {\n          this.handleIcon = \"zoom\";\n          this.moveMode = false\n\n        } else if (this.choiseMenu == 3) {\n          this.setNavigationMode()\n\n        } else if (this.choiseMenu == 4) {\n          alert(\"exit\")\n        }\n        this.closeMenu()\n        break;\n      case \"Escape\":\n        this.closeMenu();\n        break;\n    }\n  }\n\n  private handlingMap(key): void {\n    switch (key) {\n      case \"ArrowUp\":\n        if (this.moveMode) {\n          if (this.map.getCenter().lat < CONST.LAT_MAX) {\n            this.moveMap(1, 0);\n          }\n        } else {\n          if (this.mapZoom < CONST.ZOOM_MAX) {\n            this.zoomMap(1);\n            this.moveShift /= 2;\n          }\n        }\n        break;\n      case \"ArrowDown\":\n        if (this.moveMode) {\n          if (this.map.getCenter().lat > -CONST.LAT_MAX) {\n            this.moveMap(-1, 0);\n          }\n        } else {\n          if (this.mapZoom > CONST.ZOOM_MIN) {\n            this.zoomMap(-1);\n            this.moveShift *= 2;\n          }\n        }\n        break;\n      case \"ArrowRight\":\n        if (this.moveMode) {\n          this.moveMap(0, 1);\n        } else {\n        }\n        break;\n      case \"ArrowLeft\":\n        if (this.moveMode) {\n          this.moveMap(0, -1);\n        } else {\n        }\n        break;\n      case \"Enter\":\n        this.changeMode()\n        break;\n      case \"Escape\":\n        this.openMenu();\n        break;\n    }\n  }\n\n  // display move or zoom icon when press\n  private changeMode(): void {\n    this.moveMode = !this.moveMode;\n    if (this.moveMode) {\n      this.handleIcon = \"move\";\n      this.choiseMenu = 1;\n    } else {\n      this.handleIcon = \"zoom\";\n      this.choiseMenu = 2;\n    }\n  }\n\n  private sendModifications(key) {\n    // calcul map outline by container size and pixel progection\n    let mapSize = this.map.getSize();\n    let centerPixel = this.map.project([this.mapLat, this.mapLng], this.mapZoom)\n    let topLeft = this.map.unproject([centerPixel.x - mapSize.x / 2, centerPixel.y - mapSize.y / 2], this.mapZoom)\n    let bottomRight = this.map.unproject([centerPixel.x + mapSize.x / 2, centerPixel.y + mapSize.y / 2], this.mapZoom)\n\n    // send coordinates results\n    this.onchange.emit(\n      {\n        key: key,\n        zoom: this.mapZoom,\n        lat: this.mapLat,\n        lng: this.mapLng,\n        view: {\n          top: topLeft.lat,\n          left: topLeft.lng,\n          bottom: bottomRight.lat,\n          right: bottomRight.lng\n        }\n      })\n  }\n\n  private sendSelectEvent(selected) {\n    this.onselect.emit(selected)\n  }\n\n  /*************** escape app functions *************/\n\n  private openMenu(): void {\n    this.displayMenu = \"show-menu\";\n  }\n\n  private closeMenu(): void {\n    this.displayMenu = \"\";\n  }\n  // show escape message\n  private selectMenu(key): void {\n    if (key == \"Escape\") {\n      this.closeMenu()\n    } else {\n      //this.validEscape = false;\n    }\n  }\n\n  /*************** navigate between markers *************/\n\n  private setNavigationMode(): void {\n    this.navigate = true;\n    this.handleIcon = \"navigation\";\n    this.navigateMarker(0, 0)\n    // define menu to move\n    this.moveMode = false\n    this.handleMenuIcon = \"move\"\n  }\n\n  private navigateMarker(lat, lng): void {\n    if (!this.marker.length) {\n      return;\n    }\n    if (this.marker.length == 1) {\n      this.navigateId = 0;\n      this.elem.nativeElement.querySelector(\"#marker_\" + this.navigateId).style.background = \"orange\";\n      return;\n    }\n    if (this.navigateId > this.marker.length) {\n      this.navigateId = 0;\n    }\n    if (lat != 0 || lng != 0) {\n      // reset previous\n      this.elem.nativeElement.querySelector(\"#marker_\" + this.marker[this.navigateId].id).style.background = \"white\";\n    }\n    // display new\n    if (lng > 0) {\n      this.findFirstRightElement();\n    } else if (lng < 0) {\n      this.findFirstLeftElement();\n    } else if (lat > 0) {\n      this.findFirstTopElement();\n    } else if (lat < 0) {\n      this.findFirstBottomElement();\n    } else {\n      this.navigateId = 0\n    }\n    let el = this.marker[this.navigateId];\n    this.mapLat = el.lat\n    this.mapLng = el.lng\n    this.moveMap(0, 0)\n    this.sendModifications(\"\")\n  }\n\n  private calcAngle(adjacent, opposite) {\n    return Math.atan(Math.abs(opposite)/Math.abs(adjacent)) * (180/Math.PI);\n  }\n  private calcHyp(adjacent, opposite) {\n    return Math.sqrt(Math.pow(adjacent, 2) + Math.pow(opposite, 2));;\n  }\n\n  private findFirstLeftElement() {\n    let selected = this.marker[this.navigateId];\n    let newSelect = null;\n    this.marker.forEach(element => {\n      if (element != selected && element.lng < selected.lng && (newSelect==null || (element.lng > newSelect.lng || newSelect.lng > selected.lng))) {\n        let angle=this.calcAngle(element.lng - selected.lng, element.lat - selected.lat);\n        //console.log(element.text+\" \"+angle)\n        if(angle<45){\n          newSelect = element;\n        }\n      }\n    });\n    if (newSelect==null || newSelect.lng >= selected.lng) {\n      this.navigateId = selected.id;\n    } else {\n      this.navigateId = newSelect.id\n    }\n  }\n  \n  private findFirstRightElement() {\n    let selected = this.marker[this.navigateId];\n    let newSelect = null\n    this.marker.forEach(element => {\n      if (element != selected && element.lng > selected.lng && (newSelect==null || (element.lng < newSelect.lng || newSelect.lng < selected.lng))) {\n        let angle=this.calcAngle(element.lng - selected.lng, element.lat - selected.lat);\n        if(angle<45){\n          newSelect = element;\n        }\n      }\n    });\n    if (newSelect==null || newSelect.lng <= selected.lng) {\n      this.navigateId = selected.id;\n    } else {\n      this.navigateId = newSelect.id\n    }\n  }\n\n  private findFirstBottomElement() {\n    let selected = this.marker[this.navigateId];\n    let newSelect = this.marker[this.navigateId == 0 ? 1 : 0];\n    this.marker.forEach(element => {\n      if (element != selected && element.lat < selected.lat && (element.lat > newSelect.lat || newSelect.lat > selected.lat)) {\n          newSelect = element;\n      }\n    });\n    if (newSelect.lat >= selected.lat) {\n      this.navigateId = selected.id;\n    } else {\n      this.navigateId = newSelect.id\n    }\n  }\n\n  private findFirstTopElement() {\n    let selected = this.marker[this.navigateId];\n    let newSelect = this.marker[this.navigateId == 0 ? 1 : 0];\n    this.marker.forEach(element => {\n      if (element != selected && element.lat > selected.lat && (element.lat < newSelect.lat || newSelect.lat < selected.lat)) {\n          newSelect = element;\n      }\n    });\n    if (newSelect.lat <= selected.lat) {\n      this.navigateId = selected.id;\n    } else {\n      this.navigateId = newSelect.id\n    }\n  }\n\n  /*************** set position, move and zoom functions *************/\n\n  // set new coordinates and handle zoom \n  private setPosition(): void {\n    let coord = this.map.getCenter();\n    this.mapLat = coord.lat;\n    this.mapLng = coord.lng;\n    this.mapZoom = this.map.getZoom();\n    // calcul new move size\n    this.setMoveShift();\n  }\n\n  // calcul new coordinates\n  private moveMap(lat, lng): void {\n    this.mapLat += lat * this.moveShift;\n    this.mapLng += lng * this.moveShift;\n    this.map.setView([this.mapLat, this.mapLng], this.mapZoom);\n  }\n\n  // update zoom\n  private zoomMap(zoom): void {\n    this.mapZoom += zoom;\n    this.map.setZoom(this.mapZoom);\n  }\n\n  // alter move padding\n  setMoveShift() {\n    this.moveShift = 80;\n    for (let i = 1; i < this.mapZoom; i++) {\n      this.moveShift /= 2;\n    }\n  }\n\n  /*************** search input functions *************/\n\n  // set input focus or blur\n  initInput() {\n    // select search input box\n    this.searchInput = this.elem.nativeElement.querySelector(\n      \".leaflet-control-geocoder-form input\"\n    );\n    this.searchBar = this.elem.nativeElement.querySelector(\n      \".leaflet-bar\"\n    );\n    this.setFocusOut();\n  }\n  setFocus() {\n\n    this.searchBar.style.display = \"block\";\n    this.searchInput.focus();\n    this.searchInputFocused = true;\n  }\n  setFocusOut() {\n    this.searchInput.blur();\n    this.searchBar.style.display = \"none\";\n    this.searchInputFocused = false;\n\n    this.setPosition();\n  }\n}\n","<div class=\"map-container\">\n    <i class=\"icon {{handleIcon}}\"></i>\n    <div id=\"map\"></div>\n</div>\n<div class=\"menu-container\" class=\"{{displayMenu}}\">\n    <div class=\"menu-box\">\n        <i class=\"icon search {{(choiseMenu==0?'selected':'')}}\"></i>\n        <i class=\"icon move {{(choiseMenu==1?'selected':'')}}\"></i>\n        <i class=\"icon zoom {{(choiseMenu==2?'selected':'')}}\"></i>\n        <i class=\"icon navigation {{(choiseMenu==3?'selected':'')}}\"></i>\n        <i class=\"icon logout {{(choiseMenu==4?'selected':'')}}\"></i>\n    </div>  \n</div>","import { NgModule } from '@angular/core';\nimport { MapLibraryComponent } from './map-library.component';\n\n\n\n@NgModule({\n  declarations: [MapLibraryComponent],\n  imports: [\n  ],\n  exports: [MapLibraryComponent]\n})\nexport class MapLibraryModule { }\n","/*\n * Public API Surface of map-library\n */\n\nexport * from './lib/map-library.service';\nexport * from './lib/map-library.component';\nexport * from './lib/map-library.module';\n","/**\n * Generated bundle index. Do not edit.\n */\n\nexport * from './public-api';\n"],"names":["L.map","L.tileLayer","L.Control","marker","L.marker","L.Marker","L.DivIcon","i0.ɵɵelementStart","i0.ɵɵelement","i0.ɵɵelementEnd","i0.ɵɵadvance","i0.ɵɵclassMapInterpolate1","i0.ɵɵclassMap"],"mappings":"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"}