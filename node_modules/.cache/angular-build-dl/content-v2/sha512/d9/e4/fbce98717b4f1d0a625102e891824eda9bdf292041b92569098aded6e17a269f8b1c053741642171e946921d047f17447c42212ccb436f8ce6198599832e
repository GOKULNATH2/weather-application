{"version":3,"sources":["webpack:///$_lazy_route_resource lazy namespace object","webpack:///dist/map-library/fesm2015/map-library.js","webpack:///src/app/app.component.ts","webpack:///src/app/app.component.html","webpack:///src/app/app.module.ts","webpack:///src/app/weather/weather.component.ts","webpack:///src/app/weather/weather.component.html","webpack:///src/environments/environment.ts","webpack:///src/main.ts"],"names":["webpackEmptyAsyncContext","req","Promise","resolve","then","e","Error","code","keys","module","exports","id","MapLibraryService","ɵfac","MapLibraryService_Factory","t","ɵprov","token","factory","providedIn","type","args","CONST","MapLibraryComponent","elem","mapLat","mapLng","mapZoom","onchange","onselect","searchInputFocused","moveMode","handleIcon","handleMenuIcon","displayMenu","choiseMenu","navigate","navigateId","mapMarkers","initMap","initInput","setMoveShift","setSearch","search","setMarker","marker","setTimeout","sendModifications","map","attributionControl","zoomControl","center","zoom","addTo","keyboard","disable","geocoder","position","collapsed","placeholder","defaultMarkGeocode","setQuery","_geocode","_results","length","_geocodeResultSelected","_clearResults","marker$1","cleanMarkers","i","forEach","element","text","img","generateImageMarker","lat","lng","generateIconMarker","nativeElement","querySelector","style","background","removeLayer","html","content","icon","className","iconSize","iconAnchor","changes","Object","setView","event","focused","handlingMenu","key","handlingNavigation","handlingMap","navigateMarker","sendSelectEvent","openMenu","setFocus","setFocusOut","setNavigationMode","alert","closeMenu","getCenter","LAT_MAX","moveMap","ZOOM_MAX","zoomMap","moveShift","ZOOM_MIN","changeMode","mapSize","getSize","centerPixel","project","topLeft","unproject","x","y","bottomRight","emit","view","top","left","bottom","right","selected","findFirstRightElement","findFirstLeftElement","findFirstTopElement","findFirstBottomElement","el","adjacent","opposite","Math","atan","abs","PI","sqrt","pow","newSelect","angle","calcAngle","coord","getZoom","setZoom","searchInput","searchBar","display","focus","blur","setPosition","MapLibraryComponent_Factory","ɵcmp","selectors","hostBindings","MapLibraryComponent_HostBindings","rf","ctx","MapLibraryComponent_keyup_HostBindingHandler","$event","keyEvent","inputs","outputs","features","decls","vars","consts","template","MapLibraryComponent_Template","styles","selector","templateUrl","styleUrls","MapLibraryModule","ɵmod","ɵinj","MapLibraryModule_Factory","imports","ngJitMode","declarations","AppComponent","title","imageTab","infobox","getExif","console","log","displayInfos","displayCities","images","innerHTML","hideInfos","tab","latitude","longitude","push","city","imgUrl","self","getImageFromImageUrl","image","EXIF","getData","imgLat","getTag","imgLng","strLatRef","strLongRef","fLat","fLng","url","callback","Image","setAttribute","onload","src","xhr","XMLHttpRequest","open","responseType","fr","FileReader","result","readAsDataURL","response","send","onMapChange","onMapSelect","AppModule","providers","bootstrap","WeatherComponent","weather","getWeatherData","fetch","json","data","setWeatherData","WeatherData","list","item","main","temp","environment","production","bootstrapModule","err","error"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;AAAA,aAASA,wBAAT,CAAkCC,GAAlC,EAAuC;AACtC;AACA;AACA,aAAOC,OAAO,CAACC,OAAR,GAAkBC,IAAlB,CAAuB,YAAW;AACxC,YAAIC,CAAC,GAAG,IAAIC,KAAJ,CAAU,yBAAyBL,GAAzB,GAA+B,GAAzC,CAAR;AACAI,SAAC,CAACE,IAAF,GAAS,kBAAT;AACA,cAAMF,CAAN;AACA,OAJM,CAAP;AAKA;;AACDL,4BAAwB,CAACQ,IAAzB,GAAgC,YAAW;AAAE,aAAO,EAAP;AAAY,KAAzD;;AACAR,4BAAwB,CAACG,OAAzB,GAAmCH,wBAAnC;AACAS,UAAM,CAACC,OAAP,GAAiBV,wBAAjB;AACAA,4BAAwB,CAACW,EAAzB,GAA8B,yCAA9B;;;;;;;;;;;;;;;;ACZA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;;QAIMC,iB,GACF,6BAAc;AAAA;AACb,K;;AAELA,qBAAiB,CAACC,IAAlB,GAAyB,SAASC,yBAAT,CAAmCC,CAAnC,EAAsC;AAAE,aAAO,KAAKA,CAAC,IAAIH,iBAAV,GAAP;AAAwC,KAAzG;;AACAA,qBAAiB,CAACI,KAAlB,GAA0B,yEAAmB;AAAEC,WAAK,EAAEL,iBAAT;AAA4BM,aAAO,EAAEN,iBAAiB,CAACC,IAAvD;AAA6DM,gBAAU,EAAE;AAAzE,KAAnB,CAA1B;AACA;;AAAc,KAAC,YAAY;AAAE,8EAAkBP,iBAAlB,EAAqC,CAAC;AAC3DQ,YAAI,EAAE,wDADqD;AAE3DC,YAAI,EAAE,CAAC;AACCF,oBAAU,EAAE;AADb,SAAD;AAFqD,OAAD,CAArC,EAKrB,YAAY;AAAE,eAAO,EAAP;AAAY,OALL,EAKO,IALP;AAKe,KAL9B;;AAOd,QAAIG,KAAJ;;AACA,KAAC,UAAUA,KAAV,EAAiB;AACdA,WAAK,CAACA,KAAK,CAAC,UAAD,CAAL,GAAoB,EAArB,CAAL,GAAgC,UAAhC;AACAA,WAAK,CAACA,KAAK,CAAC,UAAD,CAAL,GAAoB,CAArB,CAAL,GAA+B,UAA/B;AACAA,WAAK,CAACA,KAAK,CAAC,SAAD,CAAL,GAAmB,EAApB,CAAL,GAA+B,SAA/B;AACH,KAJD,EAIGA,KAAK,KAAKA,KAAK,GAAG,EAAb,CAJR;;QAKMC,mB;;;AACF,mCAAYC,IAAZ,EAAkB;AAAA;;AACd,aAAKA,IAAL,GAAYA,IAAZ,CADc,CAEd;;AACA,aAAKC,MAAL,GAAc,EAAd;AACA,aAAKC,MAAL,GAAc,CAAd;AACA,aAAKC,OAAL,GAAe,CAAf;AACA,aAAKC,QAAL,GAAgB,IAAI,0DAAJ,EAAhB;AACA,aAAKC,QAAL,GAAgB,IAAI,0DAAJ,EAAhB;AACA,aAAKC,kBAAL,GAA0B,KAA1B;AACA,aAAKC,QAAL,GAAgB,IAAhB;AACA,aAAKC,UAAL,GAAkB,MAAlB;AACA,aAAKC,cAAL,GAAsB,MAAtB;AACA,aAAKC,WAAL,GAAmB,EAAnB;AACA,aAAKC,UAAL,GAAkB,CAAlB;AACA,aAAKC,QAAL,GAAgB,KAAhB;AACA,aAAKC,UAAL,GAAkB,CAAlB,CAfc,CAgBd;;AACA,aAAKC,UAAL,GAAkB,EAAlB;AACH;;;;0CACiB;AAAA;;AACd;AACA,eAAKC,OAAL;AACA,eAAKC,SAAL;AACA,eAAKC,YAAL,GAJc,CAKd;;AACA,eAAKC,SAAL,CAAe,KAAKC,MAApB;AACA,eAAKC,SAAL,CAAe,KAAKC,MAApB,EAPc,CAQd;;AACAC,oBAAU,CAAC,YAAM;AACb,iBAAI,CAACC,iBAAL,CAAuB,EAAvB;AACH,WAFS,EAEP,IAFO,CAAV;AAGH;;;kCACS;AACN;AACA,eAAKC,GAAL,GAAW,oDAAI,KAAJ,EAAW;AAClBC,8BAAkB,EAAE,KADF;AAElBC,uBAAW,EAAE,KAFK;AAGlBC,kBAAM,EAAE,CAAC,KAAK1B,MAAN,EAAc,KAAKC,MAAnB,CAHU;AAIlB0B,gBAAI,EAAE,KAAKzB;AAJO,WAAX,CAAX,CAFM,CAQN;;AACA,oEAAU,0CAAV,EAAsD0B,KAAtD,CAA4D,KAAKL,GAAjE,EATM,CAUN;;AACA,eAAKA,GAAL,CAASM,QAAT,CAAkBC,OAAlB,GAXM,CAYN;;AACA,eAAKC,QAAL,GAAgB,gDAAQA,QAAR,CAAiB;AAC7BC,oBAAQ,EAAE,SADmB;AAE7BC,qBAAS,EAAE,KAFkB;AAG7BC,uBAAW,EAAE,cAHgB;AAI7BC,8BAAkB,EAAE;AAJS,WAAjB,EAKbP,KALa,CAKP,KAAKL,GALE,CAAhB;AAMH;;;kCACSL,M,EAAQ;AAAA;;AACd,cAAI,KAAKA,MAAT,EAAiB;AACb;AACA,iBAAKa,QAAL,CAAcK,QAAd,CAAuBlB,MAAvB,EAA+BmB,QAA/B,GAFa,CAGb;;;AACAhB,sBAAU,CAAC,YAAM;AACb,kBAAI,MAAI,CAACU,QAAL,CAAcO,QAAd,IAA0B,MAAI,CAACP,QAAL,CAAcO,QAAd,CAAuBC,MAArD,EAA6D;AACzD,sBAAI,CAACR,QAAL,CAAcS,sBAAd,CAAqC,MAAI,CAACT,QAAL,CAAcO,QAAd,CAAuB,CAAvB,CAArC;;AACA,sBAAI,CAACP,QAAL,CAAcU,aAAd;AACH;AACJ,aALS,EAKP,IALO,CAAV;AAMH;AACJ;;;kCACSC,Q,EAAU;AAAA;;AAChB,eAAKC,YAAL;AACA,cAAIC,CAAC,GAAG,CAAR;AACAF,kBAAQ,CAACG,OAAT,CAAiB,UAAAC,OAAO,EAAI;AACxB,gBAAI,SAASA,OAAT,IAAoB,SAASA,OAAjC,EAA0C;AACtCA,qBAAO,CAAC5D,EAAR,GAAa0D,CAAb;;AACA,kBAAI,CAACE,OAAO,CAACC,IAAT,IAAiBD,OAAO,CAACE,GAA7B,EAAkC;AAC9B,sBAAI,CAACnC,UAAL,CAAgB+B,CAAhB,IAAqB,MAAI,CAACK,mBAAL,CAAyBH,OAAzB,CAArB;AACH,eAFD,MAGK,IAAI,CAACA,OAAO,CAACC,IAAb,EAAmB;AACpB,sBAAI,CAAClC,UAAL,CAAgB+B,CAAhB,IAAqB,uDAAO,CAACE,OAAO,CAACI,GAAT,EAAcJ,OAAO,CAACK,GAAtB,CAAP,CAArB;AACH,eAFI,MAGA;AACD,sBAAI,CAACtC,UAAL,CAAgB+B,CAAhB,IAAqB,MAAI,CAACQ,kBAAL,CAAwBN,OAAxB,CAArB;AACH;;AACD,oBAAI,CAACjC,UAAL,CAAgB+B,CAAhB,EAAmBhB,KAAnB,CAAyB,MAAI,CAACL,GAA9B;;AACA,kBAAI,MAAI,CAACZ,QAAL,IAAiB,MAAI,CAACX,MAAL,IAAe8C,OAAO,CAACI,GAAxC,IAA+C,MAAI,CAACjD,MAAL,IAAe6C,OAAO,CAACK,GAA1E,EAA+E;AAC3E,sBAAI,CAACvC,UAAL,GAAkBgC,CAAlB;AACA,sBAAI,CAAC7C,IAAL,CAAUsD,aAAV,CAAwBC,aAAxB,CAAsC,aAAa,MAAI,CAAC1C,UAAxD,EAAoE2C,KAApE,CAA0EC,UAA1E,GAAuF,QAAvF;AACH;;AACDZ,eAAC;AACJ;AACJ,WAnBD;AAoBH,S,CACD;;;;uCACe;AACX,eAAK,IAAIA,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG,KAAK/B,UAAL,CAAgB0B,MAApC,EAA4CK,CAAC,EAA7C,EAAiD;AAC7C,iBAAKrB,GAAL,CAASkC,WAAT,CAAqB,KAAK5C,UAAL,CAAgB+B,CAAhB,CAArB;AACH;AACJ,S,CACD;;;;2CACmBE,O,EAAS;AACxB;AACA,cAAIY,IAAI,GAAG,oDACoBZ,OAAO,CAAC5D,EAD5B,+BAEJ4D,OAAO,CAACC,IAFJ,yBAGND,OAAO,CAACa,OAAR,mBAA2Bb,OAAO,CAACa,OAAnC,iBAHM,KAINb,OAAO,CAACE,GAAR,wBAA2BF,OAAO,CAACE,GAAnC,cAJM,oBAAX,CAFwB,CAQxB;;AACA,iBAAO,IAAI,8CAAJ,CAAW,CAACF,OAAO,CAACI,GAAT,EAAcJ,OAAO,CAACK,GAAtB,CAAX,EAAuC;AAC1CS,gBAAI,EAAE,IAAI,+CAAJ,CAAY;AACdC,uBAAS,EAAE,EADG;AAEdC,sBAAQ,EAAE,CAAC,GAAD,EAAM,EAAN,CAFI;AAGdC,wBAAU,EAAE,CAAC,EAAD,EAAKjB,OAAO,CAACE,GAAR,GAAc,EAAd,GAAmB,EAAxB,CAHE;AAIdU,kBAAI,EAAJA;AAJc,aAAZ;AADoC,WAAvC,CAAP;AAQH,S,CACD;;;;4CACoBZ,O,EAAS;AACzB;AACA,cAAIY,IAAI,8BAAsBZ,OAAO,CAAC5D,EAA9B,4CAA8D4D,OAAO,CAACE,GAAtE,SAAR,CAFyB,CAGzB;;AACA,iBAAO,IAAI,8CAAJ,CAAW,CAACF,OAAO,CAACI,GAAT,EAAcJ,OAAO,CAACK,GAAtB,CAAX,EAAuC;AAC1CS,gBAAI,EAAE,IAAI,+CAAJ,CAAY;AACdC,uBAAS,EAAE,EADG;AAEdC,sBAAQ,EAAE,CAAC,EAAD,EAAK,EAAL,CAFI;AAGdC,wBAAU,EAAE,CAAC,EAAD,EAAKjB,OAAO,CAACE,GAAR,GAAc,EAAd,GAAmB,EAAxB,CAHE;AAIdU,kBAAI,EAAJA;AAJc,aAAZ;AADoC,WAAvC,CAAP;AAQH;AACD;;;;oCACYM,O,EAAS;AACjB,cAAI,KAAKzC,GAAT,EAAc;AACV,oBAAQ0C,MAAM,CAAClF,IAAP,CAAYiF,OAAZ,EAAqB,CAArB,CAAR;AACI,mBAAK,SAAL;AACA,mBAAK,QAAL;AACA,mBAAK,QAAL;AACI,qBAAKzC,GAAL,CAAS2C,OAAT,CAAiB,CAAC,KAAKlE,MAAN,EAAc,KAAKC,MAAnB,CAAjB,EAA6C,KAAKC,OAAlD;AACA,qBAAKc,YAAL;AACA;;AACJ,mBAAK,QAAL;AACI,qBAAKG,SAAL,CAAe,KAAKC,MAApB;AACA;;AACJ,mBAAK,QAAL;AACI,qBAAKH,SAAL,CAAe,KAAKC,MAApB;AACA;AAZR;AAcH;AACJ;AACD;;;;iCACSiD,K,EAAO;AACZ,cAAI,KAAKC,OAAT,EAAkB;AACd,gBAAI,KAAK3D,WAAL,IAAoB,EAAxB,EAA4B;AACxB,mBAAK4D,YAAL,CAAkBF,KAAK,CAACG,GAAxB;AACH,aAFD,MAGK,IAAI,KAAK3D,QAAT,EAAmB;AACpB,mBAAK4D,kBAAL,CAAwBJ,KAAK,CAACG,GAA9B;AACH,aAFI,MAGA;AACD,mBAAKE,WAAL,CAAiBL,KAAK,CAACG,GAAvB,EADC,CAED;;AACA,mBAAKhD,iBAAL,CAAuB6C,KAAK,CAACG,GAA7B;AACH;AACJ;AACJ;;;2CACkBA,G,EAAK;AACpB,kBAAQA,GAAR;AACI,iBAAK,SAAL;AACI,mBAAKG,cAAL,CAAoB,CAApB,EAAuB,CAAvB;AACA;;AACJ,iBAAK,WAAL;AACI,mBAAKA,cAAL,CAAoB,CAAC,CAArB,EAAwB,CAAxB;AACA;;AACJ,iBAAK,YAAL;AACI,mBAAKA,cAAL,CAAoB,CAApB,EAAuB,CAAvB;AACA;;AACJ,iBAAK,WAAL;AACI,mBAAKA,cAAL,CAAoB,CAApB,EAAuB,CAAC,CAAxB;AACA;;AACJ,iBAAK,OAAL;AACI;AACA,kBAAI,KAAKrD,MAAL,CAAY,KAAKR,UAAjB,CAAJ,EACI,KAAK8D,eAAL,CAAqB,KAAKtD,MAAL,CAAY,KAAKR,UAAjB,CAArB;AACJ;;AACJ,iBAAK,QAAL;AACI,mBAAK+D,QAAL;AACA;AApBR;AAsBH;;;qCACYL,G,EAAK;AACd,kBAAQA,GAAR;AACI,iBAAK,YAAL;AACI,mBAAK5D,UAAL;;AACA,kBAAI,KAAKA,UAAL,GAAkB,CAAtB,EAAyB;AACrB,qBAAKA,UAAL,GAAkB,CAAlB;AACH;;AACD;;AACJ,iBAAK,WAAL;AACI,mBAAKA,UAAL;;AACA,kBAAI,KAAKA,UAAL,GAAkB,CAAtB,EAAyB;AACrB,qBAAKA,UAAL,GAAkB,CAAlB;AACH;;AACD;;AACJ,iBAAK,OAAL;AACI;AACA,mBAAKC,QAAL,GAAgB,KAAhB;;AACA,kBAAI,KAAKD,UAAL,IAAmB,CAAvB,EAA0B;AACtB,qBAAKkE,QAAL;AACH,eAFD,MAGK;AACD,qBAAKC,WAAL;AACH;;AACD,kBAAI,KAAKnE,UAAL,IAAmB,CAAvB,EAA0B;AACtB,qBAAKH,UAAL,GAAkB,MAAlB;AACA,qBAAKD,QAAL,GAAgB,IAAhB;AACH,eAHD,MAIK,IAAI,KAAKI,UAAL,IAAmB,CAAvB,EAA0B;AAC3B,qBAAKH,UAAL,GAAkB,MAAlB;AACA,qBAAKD,QAAL,GAAgB,KAAhB;AACH,eAHI,MAIA,IAAI,KAAKI,UAAL,IAAmB,CAAvB,EAA0B;AAC3B,qBAAKoE,iBAAL;AACH,eAFI,MAGA,IAAI,KAAKpE,UAAL,IAAmB,CAAvB,EAA0B;AAC3BqE,qBAAK,CAAC,MAAD,CAAL;AACH;;AACD,mBAAKC,SAAL;AACA;;AACJ,iBAAK,QAAL;AACI,mBAAKA,SAAL;AACA;AAxCR;AA0CH;;;oCACWV,G,EAAK;AACb,kBAAQA,GAAR;AACI,iBAAK,SAAL;AACI,kBAAI,KAAKhE,QAAT,EAAmB;AACf,oBAAI,KAAKiB,GAAL,CAAS0D,SAAT,GAAqB/B,GAArB,GAA2BrD,KAAK,CAACqF,OAArC,EAA8C;AAC1C,uBAAKC,OAAL,CAAa,CAAb,EAAgB,CAAhB;AACH;AACJ,eAJD,MAKK;AACD,oBAAI,KAAKjF,OAAL,GAAeL,KAAK,CAACuF,QAAzB,EAAmC;AAC/B,uBAAKC,OAAL,CAAa,CAAb;AACA,uBAAKC,SAAL,IAAkB,CAAlB;AACH;AACJ;;AACD;;AACJ,iBAAK,WAAL;AACI,kBAAI,KAAKhF,QAAT,EAAmB;AACf,oBAAI,KAAKiB,GAAL,CAAS0D,SAAT,GAAqB/B,GAArB,GAA2B,CAACrD,KAAK,CAACqF,OAAtC,EAA+C;AAC3C,uBAAKC,OAAL,CAAa,CAAC,CAAd,EAAiB,CAAjB;AACH;AACJ,eAJD,MAKK;AACD,oBAAI,KAAKjF,OAAL,GAAeL,KAAK,CAAC0F,QAAzB,EAAmC;AAC/B,uBAAKF,OAAL,CAAa,CAAC,CAAd;AACA,uBAAKC,SAAL,IAAkB,CAAlB;AACH;AACJ;;AACD;;AACJ,iBAAK,YAAL;AACI,kBAAI,KAAKhF,QAAT,EAAmB;AACf,qBAAK6E,OAAL,CAAa,CAAb,EAAgB,CAAhB;AACH,eAFD,MAGK,CACJ;;AACD;;AACJ,iBAAK,WAAL;AACI,kBAAI,KAAK7E,QAAT,EAAmB;AACf,qBAAK6E,OAAL,CAAa,CAAb,EAAgB,CAAC,CAAjB;AACH,eAFD,MAGK,CACJ;;AACD;;AACJ,iBAAK,OAAL;AACI,mBAAKK,UAAL;AACA;;AACJ,iBAAK,QAAL;AACI,mBAAKb,QAAL;AACA;AA9CR;AAgDH,S,CACD;;;;qCACa;AACT,eAAKrE,QAAL,GAAgB,CAAC,KAAKA,QAAtB;;AACA,cAAI,KAAKA,QAAT,EAAmB;AACf,iBAAKC,UAAL,GAAkB,MAAlB;AACA,iBAAKG,UAAL,GAAkB,CAAlB;AACH,WAHD,MAIK;AACD,iBAAKH,UAAL,GAAkB,MAAlB;AACA,iBAAKG,UAAL,GAAkB,CAAlB;AACH;AACJ;;;0CACiB4D,G,EAAK;AACnB;AACA,cAAImB,OAAO,GAAG,KAAKlE,GAAL,CAASmE,OAAT,EAAd;AACA,cAAIC,WAAW,GAAG,KAAKpE,GAAL,CAASqE,OAAT,CAAiB,CAAC,KAAK5F,MAAN,EAAc,KAAKC,MAAnB,CAAjB,EAA6C,KAAKC,OAAlD,CAAlB;AACA,cAAI2F,OAAO,GAAG,KAAKtE,GAAL,CAASuE,SAAT,CAAmB,CAACH,WAAW,CAACI,CAAZ,GAAgBN,OAAO,CAACM,CAAR,GAAY,CAA7B,EAAgCJ,WAAW,CAACK,CAAZ,GAAgBP,OAAO,CAACO,CAAR,GAAY,CAA5D,CAAnB,EAAmF,KAAK9F,OAAxF,CAAd;AACA,cAAI+F,WAAW,GAAG,KAAK1E,GAAL,CAASuE,SAAT,CAAmB,CAACH,WAAW,CAACI,CAAZ,GAAgBN,OAAO,CAACM,CAAR,GAAY,CAA7B,EAAgCJ,WAAW,CAACK,CAAZ,GAAgBP,OAAO,CAACO,CAAR,GAAY,CAA5D,CAAnB,EAAmF,KAAK9F,OAAxF,CAAlB,CALmB,CAMnB;;AACA,eAAKC,QAAL,CAAc+F,IAAd,CAAmB;AACf5B,eAAG,EAAEA,GADU;AAEf3C,gBAAI,EAAE,KAAKzB,OAFI;AAGfgD,eAAG,EAAE,KAAKlD,MAHK;AAIfmD,eAAG,EAAE,KAAKlD,MAJK;AAKfkG,gBAAI,EAAE;AACFC,iBAAG,EAAEP,OAAO,CAAC3C,GADX;AAEFmD,kBAAI,EAAER,OAAO,CAAC1C,GAFZ;AAGFmD,oBAAM,EAAEL,WAAW,CAAC/C,GAHlB;AAIFqD,mBAAK,EAAEN,WAAW,CAAC9C;AAJjB;AALS,WAAnB;AAYH;;;wCACeqD,Q,EAAU;AACtB,eAAKpG,QAAL,CAAc8F,IAAd,CAAmBM,QAAnB;AACH;AACD;;;;mCACW;AACP,eAAK/F,WAAL,GAAmB,WAAnB;AACH;;;oCACW;AACR,eAAKA,WAAL,GAAmB,EAAnB;AACH,S,CACD;;;;mCACW6D,G,EAAK;AACZ,cAAIA,GAAG,IAAI,QAAX,EAAqB;AACjB,iBAAKU,SAAL;AACH,WAFD,MAGK,CACD;AACH;AACJ;AACD;;;;4CACoB;AAChB,eAAKrE,QAAL,GAAgB,IAAhB;AACA,eAAKJ,UAAL,GAAkB,YAAlB;AACA,eAAKkE,cAAL,CAAoB,CAApB,EAAuB,CAAvB,EAHgB,CAIhB;;AACA,eAAKnE,QAAL,GAAgB,KAAhB;AACA,eAAKE,cAAL,GAAsB,MAAtB;AACH;;;uCACc0C,G,EAAKC,G,EAAK;AACrB,cAAI,CAAC,KAAK/B,MAAL,CAAYmB,MAAjB,EAAyB;AACrB;AACH;;AACD,cAAI,KAAKnB,MAAL,CAAYmB,MAAZ,IAAsB,CAA1B,EAA6B;AACzB,iBAAK3B,UAAL,GAAkB,CAAlB;AACA,iBAAKb,IAAL,CAAUsD,aAAV,CAAwBC,aAAxB,CAAsC,aAAa,KAAK1C,UAAxD,EAAoE2C,KAApE,CAA0EC,UAA1E,GAAuF,QAAvF;AACA;AACH;;AACD,cAAI,KAAK5C,UAAL,GAAkB,KAAKQ,MAAL,CAAYmB,MAAlC,EAA0C;AACtC,iBAAK3B,UAAL,GAAkB,CAAlB;AACH;;AACD,cAAIsC,GAAG,IAAI,CAAP,IAAYC,GAAG,IAAI,CAAvB,EAA0B;AACtB;AACA,iBAAKpD,IAAL,CAAUsD,aAAV,CAAwBC,aAAxB,CAAsC,aAAa,KAAKlC,MAAL,CAAY,KAAKR,UAAjB,EAA6B1B,EAAhF,EAAoFqE,KAApF,CAA0FC,UAA1F,GAAuG,OAAvG;AACH,WAfoB,CAgBrB;;;AACA,cAAIL,GAAG,GAAG,CAAV,EAAa;AACT,iBAAKsD,qBAAL;AACH,WAFD,MAGK,IAAItD,GAAG,GAAG,CAAV,EAAa;AACd,iBAAKuD,oBAAL;AACH,WAFI,MAGA,IAAIxD,GAAG,GAAG,CAAV,EAAa;AACd,iBAAKyD,mBAAL;AACH,WAFI,MAGA,IAAIzD,GAAG,GAAG,CAAV,EAAa;AACd,iBAAK0D,sBAAL;AACH,WAFI,MAGA;AACD,iBAAKhG,UAAL,GAAkB,CAAlB;AACH;;AACD,cAAIiG,EAAE,GAAG,KAAKzF,MAAL,CAAY,KAAKR,UAAjB,CAAT;AACA,eAAKZ,MAAL,GAAc6G,EAAE,CAAC3D,GAAjB;AACA,eAAKjD,MAAL,GAAc4G,EAAE,CAAC1D,GAAjB;AACA,eAAKgC,OAAL,CAAa,CAAb,EAAgB,CAAhB;AACA,eAAK7D,iBAAL,CAAuB,EAAvB;AACH;;;kCACSwF,Q,EAAUC,Q,EAAU;AAC1B,iBAAOC,IAAI,CAACC,IAAL,CAAUD,IAAI,CAACE,GAAL,CAASH,QAAT,IAAqBC,IAAI,CAACE,GAAL,CAASJ,QAAT,CAA/B,KAAsD,MAAME,IAAI,CAACG,EAAjE,CAAP;AACH;;;gCACOL,Q,EAAUC,Q,EAAU;AACxB,iBAAOC,IAAI,CAACI,IAAL,CAAUJ,IAAI,CAACK,GAAL,CAASP,QAAT,EAAmB,CAAnB,IAAwBE,IAAI,CAACK,GAAL,CAASN,QAAT,EAAmB,CAAnB,CAAlC,CAAP;AACA;AACH;;;+CACsB;AAAA;;AACnB,cAAIP,QAAQ,GAAG,KAAKpF,MAAL,CAAY,KAAKR,UAAjB,CAAf;AACA,cAAI0G,SAAS,GAAG,IAAhB;AACA,eAAKlG,MAAL,CAAYyB,OAAZ,CAAoB,UAAAC,OAAO,EAAI;AAC3B,gBAAIA,OAAO,IAAI0D,QAAX,IAAuB1D,OAAO,CAACK,GAAR,GAAcqD,QAAQ,CAACrD,GAA9C,KAAsDmE,SAAS,IAAI,IAAb,IAAsBxE,OAAO,CAACK,GAAR,GAAcmE,SAAS,CAACnE,GAAxB,IAA+BmE,SAAS,CAACnE,GAAV,GAAgBqD,QAAQ,CAACrD,GAApI,CAAJ,EAA+I;AAC3I,kBAAIoE,KAAK,GAAG,MAAI,CAACC,SAAL,CAAe1E,OAAO,CAACK,GAAR,GAAcqD,QAAQ,CAACrD,GAAtC,EAA2CL,OAAO,CAACI,GAAR,GAAcsD,QAAQ,CAACtD,GAAlE,CAAZ,CAD2I,CAE3I;;;AACA,kBAAIqE,KAAK,GAAG,EAAZ,EAAgB;AACZD,yBAAS,GAAGxE,OAAZ;AACH;AACJ;AACJ,WARD;;AASA,cAAIwE,SAAS,IAAI,IAAb,IAAqBA,SAAS,CAACnE,GAAV,IAAiBqD,QAAQ,CAACrD,GAAnD,EAAwD;AACpD,iBAAKvC,UAAL,GAAkB4F,QAAQ,CAACtH,EAA3B;AACH,WAFD,MAGK;AACD,iBAAK0B,UAAL,GAAkB0G,SAAS,CAACpI,EAA5B;AACH;AACJ;;;gDACuB;AAAA;;AACpB,cAAIsH,QAAQ,GAAG,KAAKpF,MAAL,CAAY,KAAKR,UAAjB,CAAf;AACA,cAAI0G,SAAS,GAAG,IAAhB;AACA,eAAKlG,MAAL,CAAYyB,OAAZ,CAAoB,UAAAC,OAAO,EAAI;AAC3B,gBAAIA,OAAO,IAAI0D,QAAX,IAAuB1D,OAAO,CAACK,GAAR,GAAcqD,QAAQ,CAACrD,GAA9C,KAAsDmE,SAAS,IAAI,IAAb,IAAsBxE,OAAO,CAACK,GAAR,GAAcmE,SAAS,CAACnE,GAAxB,IAA+BmE,SAAS,CAACnE,GAAV,GAAgBqD,QAAQ,CAACrD,GAApI,CAAJ,EAA+I;AAC3I,kBAAIoE,KAAK,GAAG,MAAI,CAACC,SAAL,CAAe1E,OAAO,CAACK,GAAR,GAAcqD,QAAQ,CAACrD,GAAtC,EAA2CL,OAAO,CAACI,GAAR,GAAcsD,QAAQ,CAACtD,GAAlE,CAAZ;;AACA,kBAAIqE,KAAK,GAAG,EAAZ,EAAgB;AACZD,yBAAS,GAAGxE,OAAZ;AACH;AACJ;AACJ,WAPD;;AAQA,cAAIwE,SAAS,IAAI,IAAb,IAAqBA,SAAS,CAACnE,GAAV,IAAiBqD,QAAQ,CAACrD,GAAnD,EAAwD;AACpD,iBAAKvC,UAAL,GAAkB4F,QAAQ,CAACtH,EAA3B;AACH,WAFD,MAGK;AACD,iBAAK0B,UAAL,GAAkB0G,SAAS,CAACpI,EAA5B;AACH;AACJ;;;iDACwB;AACrB,cAAIsH,QAAQ,GAAG,KAAKpF,MAAL,CAAY,KAAKR,UAAjB,CAAf;AACA,cAAI0G,SAAS,GAAG,KAAKlG,MAAL,CAAY,KAAKR,UAAL,IAAmB,CAAnB,GAAuB,CAAvB,GAA2B,CAAvC,CAAhB;AACA,eAAKQ,MAAL,CAAYyB,OAAZ,CAAoB,UAAAC,OAAO,EAAI;AAC3B,gBAAIA,OAAO,IAAI0D,QAAX,IAAuB1D,OAAO,CAACI,GAAR,GAAcsD,QAAQ,CAACtD,GAA9C,KAAsDJ,OAAO,CAACI,GAAR,GAAcoE,SAAS,CAACpE,GAAxB,IAA+BoE,SAAS,CAACpE,GAAV,GAAgBsD,QAAQ,CAACtD,GAA9G,CAAJ,EAAwH;AACpHoE,uBAAS,GAAGxE,OAAZ;AACH;AACJ,WAJD;;AAKA,cAAIwE,SAAS,CAACpE,GAAV,IAAiBsD,QAAQ,CAACtD,GAA9B,EAAmC;AAC/B,iBAAKtC,UAAL,GAAkB4F,QAAQ,CAACtH,EAA3B;AACH,WAFD,MAGK;AACD,iBAAK0B,UAAL,GAAkB0G,SAAS,CAACpI,EAA5B;AACH;AACJ;;;8CACqB;AAClB,cAAIsH,QAAQ,GAAG,KAAKpF,MAAL,CAAY,KAAKR,UAAjB,CAAf;AACA,cAAI0G,SAAS,GAAG,KAAKlG,MAAL,CAAY,KAAKR,UAAL,IAAmB,CAAnB,GAAuB,CAAvB,GAA2B,CAAvC,CAAhB;AACA,eAAKQ,MAAL,CAAYyB,OAAZ,CAAoB,UAAAC,OAAO,EAAI;AAC3B,gBAAIA,OAAO,IAAI0D,QAAX,IAAuB1D,OAAO,CAACI,GAAR,GAAcsD,QAAQ,CAACtD,GAA9C,KAAsDJ,OAAO,CAACI,GAAR,GAAcoE,SAAS,CAACpE,GAAxB,IAA+BoE,SAAS,CAACpE,GAAV,GAAgBsD,QAAQ,CAACtD,GAA9G,CAAJ,EAAwH;AACpHoE,uBAAS,GAAGxE,OAAZ;AACH;AACJ,WAJD;;AAKA,cAAIwE,SAAS,CAACpE,GAAV,IAAiBsD,QAAQ,CAACtD,GAA9B,EAAmC;AAC/B,iBAAKtC,UAAL,GAAkB4F,QAAQ,CAACtH,EAA3B;AACH,WAFD,MAGK;AACD,iBAAK0B,UAAL,GAAkB0G,SAAS,CAACpI,EAA5B;AACH;AACJ;AACD;AACA;;;;sCACc;AACV,cAAIuI,KAAK,GAAG,KAAKlG,GAAL,CAAS0D,SAAT,EAAZ;AACA,eAAKjF,MAAL,GAAcyH,KAAK,CAACvE,GAApB;AACA,eAAKjD,MAAL,GAAcwH,KAAK,CAACtE,GAApB;AACA,eAAKjD,OAAL,GAAe,KAAKqB,GAAL,CAASmG,OAAT,EAAf,CAJU,CAKV;;AACA,eAAK1G,YAAL;AACH,S,CACD;;;;gCACQkC,G,EAAKC,G,EAAK;AACd,eAAKnD,MAAL,IAAekD,GAAG,GAAG,KAAKoC,SAA1B;AACA,eAAKrF,MAAL,IAAekD,GAAG,GAAG,KAAKmC,SAA1B;AACA,eAAK/D,GAAL,CAAS2C,OAAT,CAAiB,CAAC,KAAKlE,MAAN,EAAc,KAAKC,MAAnB,CAAjB,EAA6C,KAAKC,OAAlD;AACH,S,CACD;;;;gCACQyB,I,EAAM;AACV,eAAKzB,OAAL,IAAgByB,IAAhB;AACA,eAAKJ,GAAL,CAASoG,OAAT,CAAiB,KAAKzH,OAAtB;AACH,S,CACD;;;;uCACe;AACX,eAAKoF,SAAL,GAAiB,EAAjB;;AACA,eAAK,IAAI1C,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG,KAAK1C,OAAzB,EAAkC0C,CAAC,EAAnC,EAAuC;AACnC,iBAAK0C,SAAL,IAAkB,CAAlB;AACH;AACJ;AACD;AACA;;;;oCACY;AACR;AACA,eAAKsC,WAAL,GAAmB,KAAK7H,IAAL,CAAUsD,aAAV,CAAwBC,aAAxB,CAAsC,sCAAtC,CAAnB;AACA,eAAKuE,SAAL,GAAiB,KAAK9H,IAAL,CAAUsD,aAAV,CAAwBC,aAAxB,CAAsC,cAAtC,CAAjB;AACA,eAAKuB,WAAL;AACH;;;mCACU;AACP,eAAKgD,SAAL,CAAetE,KAAf,CAAqBuE,OAArB,GAA+B,OAA/B;AACA,eAAKF,WAAL,CAAiBG,KAAjB;AACA,eAAK1H,kBAAL,GAA0B,IAA1B;AACH;;;sCACa;AACV,eAAKuH,WAAL,CAAiBI,IAAjB;AACA,eAAKH,SAAL,CAAetE,KAAf,CAAqBuE,OAArB,GAA+B,MAA/B;AACA,eAAKzH,kBAAL,GAA0B,KAA1B;AACA,eAAK4H,WAAL;AACH;;;;;;AAELnI,uBAAmB,CAACV,IAApB,GAA2B,SAAS8I,2BAAT,CAAqC5I,CAArC,EAAwC;AAAE,aAAO,KAAKA,CAAC,IAAIQ,mBAAV,EAA+B,wEAAkB,wDAAlB,CAA/B,CAAP;AAAuE,KAA5I;;AACAA,uBAAmB,CAACqI,IAApB,GAA2B,wEAAkB;AAAExI,UAAI,EAAEG,mBAAR;AAA6BsI,eAAS,EAAE,CAAC,CAAC,aAAD,CAAD,CAAxC;AAA2DC,kBAAY,EAAE,SAASC,gCAAT,CAA0CC,EAA1C,EAA8CC,GAA9C,EAAmD;AAAE,YAAID,EAAE,GAAG,CAAT,EAAY;AAC/K,2EAAW,OAAX,EAAoB,SAASE,4CAAT,CAAsDC,MAAtD,EAA8D;AAAE,mBAAOF,GAAG,CAACG,QAAJ,CAAaD,MAAb,CAAP;AAA8B,WAAlH,EAAoH,KAApH,EAA2H,6DAA3H;AACH;AAAE,OAFsC;AAEpCE,YAAM,EAAE;AAAE5I,cAAM,EAAE,QAAV;AAAoBC,cAAM,EAAE,QAA5B;AAAsCC,eAAO,EAAE,SAA/C;AAA0DgB,cAAM,EAAE,QAAlE;AAA4EE,cAAM,EAAE,QAApF;AAA8FgD,eAAO,EAAE;AAAvG,OAF4B;AAEwFyE,aAAO,EAAE;AAAE1I,gBAAQ,EAAE,UAAZ;AAAwBC,gBAAQ,EAAE;AAAlC,OAFjG;AAEiJ0I,cAAQ,EAAE,CAAC,kEAAD,CAF3J;AAEmLC,WAAK,EAAE,EAF1L;AAE8LC,UAAI,EAAE,EAFpM;AAEwMC,YAAM,EAAE,CAAC,CAAC,CAAD,EAAI,eAAJ,CAAD,EAAuB,CAAC,IAAD,EAAO,KAAP,CAAvB,EAAsC,CAAC,CAAD,EAAI,gBAAJ,CAAtC,EAA6D,CAAC,CAAD,EAAI,UAAJ,CAA7D,CAFhN;AAE+RC,cAAQ,EAAE,SAASC,4BAAT,CAAsCZ,EAAtC,EAA0CC,GAA1C,EAA+C;AAAE,YAAID,EAAE,GAAG,CAAT,EAAY;AAC3Y,+EAAe,CAAf,EAAkB,KAAlB,EAAyB,CAAzB;AACA,0EAAU,CAAV,EAAa,GAAb;AACA,0EAAU,CAAV,EAAa,KAAb,EAAoB,CAApB;AACA;AACA,+EAAe,CAAf,EAAkB,KAAlB,EAAyB,CAAzB;AACA,+EAAe,CAAf,EAAkB,KAAlB,EAAyB,CAAzB;AACA,0EAAU,CAAV,EAAa,GAAb;AACA,0EAAU,CAAV,EAAa,GAAb;AACA,0EAAU,CAAV,EAAa,GAAb;AACA,0EAAU,CAAV,EAAa,GAAb;AACA,0EAAU,CAAV,EAAa,GAAb;AACA;AACA;AACH;;AAAC,YAAIA,EAAE,GAAG,CAAT,EAAY;AACV,0EAAU,CAAV;AACA,uFAAuB,OAAvB,EAAgCC,GAAG,CAACjI,UAApC,EAAgD,EAAhD;AACA,0EAAU,CAAV;AACA,2EAAWiI,GAAG,CAAC/H,WAAf;AACA,0EAAU,CAAV;AACA,uFAAuB,cAAvB,EAAuC+H,GAAG,CAAC9H,UAAJ,IAAkB,CAAlB,GAAsB,UAAtB,GAAmC,EAA1E,EAA8E,EAA9E;AACA,0EAAU,CAAV;AACA,uFAAuB,YAAvB,EAAqC8H,GAAG,CAAC9H,UAAJ,IAAkB,CAAlB,GAAsB,UAAtB,GAAmC,EAAxE,EAA4E,EAA5E;AACA,0EAAU,CAAV;AACA,uFAAuB,YAAvB,EAAqC8H,GAAG,CAAC9H,UAAJ,IAAkB,CAAlB,GAAsB,UAAtB,GAAmC,EAAxE,EAA4E,EAA5E;AACA,0EAAU,CAAV;AACA,uFAAuB,kBAAvB,EAA2C8H,GAAG,CAAC9H,UAAJ,IAAkB,CAAlB,GAAsB,UAAtB,GAAmC,EAA9E,EAAkF,EAAlF;AACA,0EAAU,CAAV;AACA,uFAAuB,cAAvB,EAAuC8H,GAAG,CAAC9H,UAAJ,IAAkB,CAAlB,GAAsB,UAAtB,GAAmC,EAA1E,EAA8E,EAA9E;AACH;AAAE,OA/BsC;AA+BpC0I,YAAM,EAAE,CAAC,08BAAD;AA/B4B,KAAlB,CAA3B;AAgCA;;AAAc,KAAC,YAAY;AAAE,8EAAkBtJ,mBAAlB,EAAuC,CAAC;AAC7DH,YAAI,EAAE,uDADuD;AAE7DC,YAAI,EAAE,CAAC;AACCyJ,kBAAQ,EAAE,aADX;AAECT,gBAAM,EAAE,CAAC,QAAD,EAAW,QAAX,EAAqB,SAArB,EAAgC,QAAhC,EAA0C,QAA1C,EAAoD,SAApD,CAFT;AAGCU,qBAAW,EAAE,8BAHd;AAICC,mBAAS,EAAE,CAAC,6BAAD;AAJZ,SAAD;AAFuD,OAAD,CAAvC,EAQrB,YAAY;AAAE,eAAO,CAAC;AAAE5J,cAAI,EAAE;AAAR,SAAD,CAAP;AAAgC,OARzB,EAQ2B;AAAEQ,gBAAQ,EAAE,CAAC;AACzDR,cAAI,EAAE;AADmD,SAAD,CAAZ;AAE5CS,gBAAQ,EAAE,CAAC;AACXT,cAAI,EAAE;AADK,SAAD,CAFkC;AAI5CgJ,gBAAQ,EAAE,CAAC;AACXhJ,cAAI,EAAE,0DADK;AAEXC,cAAI,EAAE,CAAC,cAAD,EAAiB,CAAC,QAAD,CAAjB;AAFK,SAAD;AAJkC,OAR3B;AAeb,KAfF;;QAiBR4J,gB;;;;AAENA,oBAAgB,CAACC,IAAjB,GAAwB,uEAAiB;AAAE9J,UAAI,EAAE6J;AAAR,KAAjB,CAAxB;AACAA,oBAAgB,CAACE,IAAjB,GAAwB,uEAAiB;AAAEjK,aAAO,EAAE,SAASkK,wBAAT,CAAkCrK,CAAlC,EAAqC;AAAE,eAAO,KAAKA,CAAC,IAAIkK,gBAAV,GAAP;AAAuC,OAAzF;AAA2FI,aAAO,EAAE,CAAC,EAAD;AAApG,KAAjB,CAAxB;;AACA,KAAC,YAAY;AAAE,OAAC,OAAOC,SAAP,KAAqB,WAArB,IAAoCA,SAArC,KAAmD,yEAAmBL,gBAAnB,EAAqC;AAAEM,oBAAY,EAAE,CAAChK,mBAAD,CAAhB;AAAuCb,eAAO,EAAE,CAACa,mBAAD;AAAhD,OAArC,CAAnD;AAAmK,KAAlL;AACA;;;AAAc,KAAC,YAAY;AAAE,8EAAkB0J,gBAAlB,EAAoC,CAAC;AAC1D7J,YAAI,EAAE,sDADoD;AAE1DC,YAAI,EAAE,CAAC;AACCkK,sBAAY,EAAE,CAAChK,mBAAD,CADf;AAEC8J,iBAAO,EAAE,EAFV;AAGC3K,iBAAO,EAAE,CAACa,mBAAD;AAHV,SAAD;AAFoD,OAAD,CAApC,EAOrB,IAPqB,EAOf,IAPe;AAOP,KAPR;AASd;;;;AAIA;;;AAKA;;;;;;;;;;;;;;;;;;ACtlBA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;;QAYaiK,Y;;;AAcX,4BAAoBhK,IAApB,EAAsC;AAAA;;AAAlB,aAAAA,IAAA,GAAAA,IAAA;AAbpB,aAAAiK,KAAA,GAAQ,iBAAR,CAasC,CAXtC;;AACO,aAAAhK,MAAA,GAAiB,EAAjB;AACA,aAAAC,MAAA,GAAiB,CAAjB;AACA,aAAAC,OAAA,GAAkB,CAAlB;AACA,aAAAgB,MAAA,GAAiB,EAAjB;AACA,aAAAE,MAAA,GAAc,EAAd;AACA,aAAAgD,OAAA,GAAmB,IAAnB;AAEC,aAAA6F,QAAA,GAAgB,EAAhB;AAGiC;;;;0CAE1B;AAAA;;AAEb,eAAKC,OAAL,GAAe,KAAKnK,IAAL,CAAUsD,aAAV,CAAwBC,aAAxB,CAAsC,UAAtC,CAAf;AAEAjC,oBAAU,CAAC,YAAI;AACb;AACA,iBAAI,IAAIuB,CAAC,GAAC,CAAV,EAAaA,CAAC,GAAC,CAAf,EAAkBA,CAAC,EAAnB,EAAsB;AACpB,oBAAI,CAACuH,OAAL,CAAa,eAAavH,CAAb,GAAe,MAA5B;AACD;AACF,WALS,EAKR,GALQ,CAAV;AAMA;;;AAGD;AAED;;;;oCACY4D,Q,EAAU;AACpB4D,iBAAO,CAACC,GAAR,CAAY7D,QAAZ;AACA,eAAK8D,YAAL,CAAkB9D,QAAlB;AACD;;;oCAEWrC,K,EAAO;AACjB;AACA,eAAKoG,aAAL,CAAmBpG,KAAnB;AAED;AAED;;;;qCACarB,O,EAAO;AAClB,eAAKsB,OAAL,GAAa,KAAb;AACA,eAAK8F,OAAL,CAAa3G,KAAb,CAAmBuE,OAAnB,GAA6B,OAA7B;AAEA,cAAI0C,MAAM,GAAG,EAAb;AACA,eAAKP,QAAL,CAAcpH,OAAd,CAAsB,UAAAgE,EAAE,EAAI;AAC1B,gBAAG/D,OAAO,CAACI,GAAR,GAAc2D,EAAE,CAAC3D,GAAH,GAAO,GAArB,IAA4BJ,OAAO,CAACI,GAAR,GAAc2D,EAAE,CAAC3D,GAAH,GAAO,GAAjD,IAAwDJ,OAAO,CAACK,GAAR,GAAc0D,EAAE,CAAC1D,GAAH,GAAO,GAA7E,IAAoFL,OAAO,CAACK,GAAR,GAAc0D,EAAE,CAAC1D,GAAH,GAAO,GAA5G,EAAgH;AAC9GqH,oBAAM,8FAGU3D,EAAE,CAAC7D,GAHb,oDAAN;AAOD;AACF,WAVD;AAYA,eAAKkH,OAAL,CAAaO,SAAb,4DAEQ3H,OAAO,CAACC,IAFhB,+EAIkBD,OAAO,CAACE,GAJ1B,oDAK6BF,OAAO,CAACa,OALrC,8EAQyB6G,MARzB;AAUD;;;oCACQ;AAAA;;AACP,eAAKN,OAAL,CAAa3G,KAAb,CAAmBuE,OAAnB,GAA6B,MAA7B;AACAzG,oBAAU,CAAC,YAAI;AAAE,kBAAI,CAAC+C,OAAL,GAAa,IAAb;AAAoB,WAA3B,EAA4B,EAA5B,CAAV;AACD;AAED;;;;iCAESD,K,EAAsB;AAC7B,cAAG,CAAC,KAAKC,OAAT,EAAiB;AACf,iBAAKG,kBAAL,CAAwBJ,KAAK,CAACG,GAA9B;AACD;AACF;;;2CAE0BA,G,EAAG;AAC5B8F,iBAAO,CAACC,GAAR,CAAY/F,GAAZ;;AACA,kBAAQA,GAAR;AACE,iBAAK,SAAL;AACE;;AACF,iBAAK,WAAL;AACE;;AACF,iBAAK,YAAL;AACE;;AACF,iBAAK,WAAL;AACE;;AACF,iBAAK,OAAL;AACE;;AACF,iBAAK,QAAL;AACE,mBAAKoG,SAAL;AACA;AAbJ;AAeD;AAED;;;;sCACcvG,K,EAAK;AAEjB,cAAIwG,GAAG,GAAC,EAAR;;AACA,sEAAiB9H,OAAjB,CAAyB,UAAAC,OAAO,EAAI;AAClC,gBAAGA,OAAO,CAACnB,IAAR,IAAgBwC,KAAK,CAACxC,IAAtB,IAA8BmB,OAAO,CAAC8H,QAAR,GAAmBzG,KAAK,CAACgC,IAAN,CAAWC,GAA5D,IAAmEtD,OAAO,CAAC8H,QAAR,GAAmBzG,KAAK,CAACgC,IAAN,CAAWG,MAAjG,IAA2GxD,OAAO,CAAC+H,SAAR,GAAoB1G,KAAK,CAACgC,IAAN,CAAWI,KAA1I,IAAmJzD,OAAO,CAAC+H,SAAR,GAAoB1G,KAAK,CAACgC,IAAN,CAAWE,IAArL,EAA0L;AACxLsE,iBAAG,CAACG,IAAJ,CAAS;AAAE/H,oBAAI,EAAED,OAAO,CAACiI,IAAhB;AAAsBpH,uBAAO,EAAC,8EAA9B;AAA8GX,mBAAG,EAAE,6BAAnH;AAAkJE,mBAAG,EAAEJ,OAAO,CAAC8H,QAA/J;AAAyKzH,mBAAG,EAAEL,OAAO,CAAC+H;AAAtL,eAAT;AACD;AACF,WAJD;;AAKA,eAAKzJ,MAAL,GAAcuJ,GAAd;AACD;AAED;;;;gCACQK,M,EAAQ;AACd,cAAIC,IAAI,GAAC,IAAT;AACA,eAAKC,oBAAL,CAA0BF,MAA1B,EAAkC,UAACG,KAAD,EAAS;AACzCC,gBAAI,CAACC,OAAL,CAAaF,KAAb,EAAoB;AAClB,kBAAIG,MAAM,GAAGF,IAAI,CAACG,MAAL,CAAY,IAAZ,EAAiB,aAAjB,CAAb;AACA,kBAAIC,MAAM,GAAGJ,IAAI,CAACG,MAAL,CAAY,IAAZ,EAAiB,cAAjB,CAAb,CAFkB,CAGlB;;AACA,kBAAIE,SAAS,GAAGL,IAAI,CAACG,MAAL,CAAY,IAAZ,EAAkB,gBAAlB,KAAuC,GAAvD;AACA,kBAAIG,UAAU,GAAGN,IAAI,CAACG,MAAL,CAAY,IAAZ,EAAkB,iBAAlB,KAAwC,GAAzD;AACA,kBAAII,IAAI,GAAG,CAACL,MAAM,CAAC,CAAD,CAAN,GAAYA,MAAM,CAAC,CAAD,CAAN,GAAU,EAAtB,GAA2BA,MAAM,CAAC,CAAD,CAAN,GAAU,IAAtC,KAA+CG,SAAS,IAAI,GAAb,GAAmB,CAAnB,GAAuB,CAAC,CAAvE,CAAX;AACA,kBAAIG,IAAI,GAAG,CAACJ,MAAM,CAAC,CAAD,CAAN,GAAYA,MAAM,CAAC,CAAD,CAAN,GAAU,EAAtB,GAA2BA,MAAM,CAAC,CAAD,CAAN,GAAU,IAAtC,KAA+CE,UAAU,IAAI,GAAd,GAAoB,CAAC,CAArB,GAAyB,CAAxE,CAAX,CAPkB,CAQlB;AACA;;AACAT,kBAAI,CAAChB,QAAL,CAAca,IAAd,CAAmB;AAAE9H,mBAAG,EAAEgI,MAAP;AAAe9H,mBAAG,EAAEyI,IAApB;AAA0BxI,mBAAG,EAAEyI;AAA/B,eAAnB;AACAxB,qBAAO,CAACC,GAAR,CAAYY,IAAI,CAAChB,QAAjB;AACD,aAZD;AAaD,WAdD;AAeD,S,CAED;;;;kCACUnH,O,EAAO;AACf,cAAI6H,GAAG,GAAC,EAAR;AACA,eAAKvJ,MAAL,CAAYyB,OAAZ,CAAoB,UAAAgE,EAAE,EAAI;AAAE8D,eAAG,CAACG,IAAJ,CAASjE,EAAT;AAAe,WAA3C;AACA8D,aAAG,CAACG,IAAJ,CAAShI,OAAT;AACA,eAAK1B,MAAL,GAAcuJ,GAAd;AACD;;;6CAEoBkB,G,EAAKC,Q,EAAU;AAClC,cAAI9I,GAAG,GAAG,IAAI+I,KAAJ,EAAV;AACA/I,aAAG,CAACgJ,YAAJ,CAAiB,aAAjB,EAAgC,WAAhC;;AACAhJ,aAAG,CAACiJ,MAAJ,GAAa,YAAY;AACrBH,oBAAQ,CAAC9I,GAAD,CAAR;AACH,WAFD;;AAGAA,aAAG,CAACkJ,GAAJ,GAAUL,GAAV;AACD;;;kCAESA,G,EAAKC,Q,EAAQ;AACrB,cAAIK,GAAG,GAAG,IAAIC,cAAJ,EAAV;AACAD,aAAG,CAACE,IAAJ,CAAS,KAAT,EAAgBR,GAAhB;AACAM,aAAG,CAACG,YAAJ,GAAmB,MAAnB;;AACAH,aAAG,CAACF,MAAJ,GAAa;AACX,gBAAIM,EAAE,GAAG,IAAIC,UAAJ,EAAT;;AACAD,cAAE,CAACN,MAAH,GAAY;AACVH,sBAAQ,CAAC,KAAKW,MAAN,CAAR;AACD,aAFD;;AAGAF,cAAE,CAACG,aAAH,CAAiBP,GAAG,CAACQ,QAArB,EALW,CAKqB;AACjC,WAND;;AAOAR,aAAG,CAACS,IAAJ;AACD;;;;;;;uBArKU7C,Y,EAAY,yH;AAAA,K;;;YAAZA,Y;AAAY,+B;AAAA;AAAA;;;;;;;;;;;ACZzB;;AAOI;AAAA,mBAAY,IAAA8C,WAAA,QAAZ;AAA+B,WAA/B,EAAgC,UAAhC,EAAgC;AAAA,mBACpB,IAAAC,WAAA,QADoB;AACD,WAD/B;;AAEJ;;AAEA;;;;AAVI,yFAAiB,QAAjB,EAAiB,UAAjB,EAAiB,SAAjB,EAAiB,WAAjB,EAAiB,QAAjB,EAAiB,UAAjB,EAAiB,QAAjB,EAAiB,UAAjB,EAAiB,SAAjB,EAAiB,WAAjB;;;;;;;;;sEDWS/C,Y,EAAY;cANxB,uDAMwB;eANd;AACTV,kBAAQ,EAAE,UADD;AAGTC,qBAAW,EAAE,sBAHJ;AAITC,mBAAS,EAAE,CAAC,qBAAD;AAJF,S;AAMc,Q;;;;;;gBA8EtB,0D;iBAAa,c,EAAgB,CAAC,QAAD,C;;;;;;;;;;;;;;;;;;;;AE1FhC;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;;QAoBawD,S;;;;;YAAAA,S;AAAS,kBAFR,2DAEQ;;;;yBAATA,S;AAAS,O;AAAA,iBAHT,E;AAAE,gBAJJ,CACP,uEADO,EAEP,4DAFO,CAII;;;;0HAGFA,S,EAAS;AAAA,uBAVlB,2DAUkB,EATlB,2EASkB;AATF,kBAGhB,uEAHgB,EAIhB,4DAJgB;AASE,O;AALF,K;;;;;sEAKPA,S,EAAS;cAZrB,sDAYqB;eAZZ;AACRjD,sBAAY,EAAE,CACZ,2DADY,EAEZ,2EAFY,CADN;AAKRF,iBAAO,EAAE,CACP,uEADO,EAEP,4DAFO,CALD;AASRoD,mBAAS,EAAE,EATH;AAURC,mBAAS,EAAE,CAAC,2DAAD;AAVH,S;AAYY,Q;;;;;;;;;;;;;;;;;;ACpBtB;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;;QAOaC,gB;;;AAGX,kCAAc;AAAA;;AADd,aAAAC,OAAA,GAAS,EAAT;AACiB;;;;mCAET;AACN,eAAKC,cAAL;AACD;;;yCACa;AAAA;;AACZC,eAAK,CAAC,6HAAD,CAAL,CACC1O,IADD,CACM,UAAAgO,QAAQ;AAAA,mBAAEA,QAAQ,CAACW,IAAX;AAAA,WADd,EAEC3O,IAFD,CAEM,UAAA4O,IAAI,EAAE;AAAC,kBAAI,CAACC,cAAL,CAAoBD,IAApB;AAA2B,WAFxC;AAID;;;uCACcA,I,EAAI;AACjB,eAAKE,WAAL,GAAmBF,IAAnB;;AADiB,qDAEC,KAAKE,WAAL,CAAiBC,IAFlB;AAAA;;AAAA;AAEjB,gEAAyC;AAAA,kBAAhCC,IAAgC;AACvC,mBAAKR,OAAL,CAAarC,IAAb,CAAkB6C,IAAI,CAACC,IAAL,CAAUC,IAA5B;AACD;AAJgB;AAAA;AAAA;AAAA;AAAA;AAMlB;;;;;;;uBApBUX,gB;AAAgB,K;;;YAAhBA,gB;AAAgB,kC;AAAA,c;AAAA,a;AAAA;AAAA;ACP7B;;AAAG;;AAAc;;AACjB;;;;;;;;sEDMaA,gB,EAAgB;cAL5B,uDAK4B;eALlB;AACT7D,kBAAQ,EAAE,aADD;AAETC,qBAAW,EAAE,0BAFJ;AAGTC,mBAAS,EAAE,CAAC,yBAAD;AAHF,S;AAKkB,Q;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AEP7B;AAAA;;;AAAA;AAAA;AAAA,O,CAAA;AACA;AACA;;;AAEO,QAAMuE,WAAW,GAAG;AACzBC,gBAAU,EAAE;AADa,KAApB;AAIP;;;;;;;AAOA;;;;;;;;;;;;;;;;;ACfA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;;AAMA,QAAI,sEAAYA,UAAhB,EAA4B;AAC1B;AACD;;AAED,gFAAyBC,eAAzB,CAAyC,yDAAzC,WACS,UAAAC,GAAG;AAAA,aAAI7D,OAAO,CAAC8D,KAAR,CAAcD,GAAd,CAAJ;AAAA,KADZ","file":"main-es5.js","sourcesContent":["function webpackEmptyAsyncContext(req) {\n\t// Here Promise.resolve().then() is used instead of new Promise() to prevent\n\t// uncaught exception popping up in devtools\n\treturn Promise.resolve().then(function() {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t});\n}\nwebpackEmptyAsyncContext.keys = function() { return []; };\nwebpackEmptyAsyncContext.resolve = webpackEmptyAsyncContext;\nmodule.exports = webpackEmptyAsyncContext;\nwebpackEmptyAsyncContext.id = \"./$$_lazy_route_resource lazy recursive\";","import { ɵɵdefineInjectable, ɵsetClassMetadata, Injectable, EventEmitter, ɵɵdirectiveInject, ElementRef, ɵɵdefineComponent, ɵɵlistener, ɵɵresolveWindow, ɵɵNgOnChangesFeature, ɵɵelementStart, ɵɵelement, ɵɵelementEnd, ɵɵadvance, ɵɵclassMapInterpolate1, ɵɵclassMap, Component, Output, HostListener, ɵɵdefineNgModule, ɵɵdefineInjector, ɵɵsetNgModuleScope, NgModule } from '@angular/core';\nimport { map, tileLayer, Control, marker, Marker, DivIcon } from 'leaflet';\nimport 'leaflet-control-geocoder';\n\nclass MapLibraryService {\n    constructor() {\n    }\n}\nMapLibraryService.ɵfac = function MapLibraryService_Factory(t) { return new (t || MapLibraryService)(); };\nMapLibraryService.ɵprov = ɵɵdefineInjectable({ token: MapLibraryService, factory: MapLibraryService.ɵfac, providedIn: 'root' });\n/*@__PURE__*/ (function () { ɵsetClassMetadata(MapLibraryService, [{\n        type: Injectable,\n        args: [{\n                providedIn: 'root'\n            }]\n    }], function () { return []; }, null); })();\n\nvar CONST;\n(function (CONST) {\n    CONST[CONST[\"ZOOM_MAX\"] = 18] = \"ZOOM_MAX\";\n    CONST[CONST[\"ZOOM_MIN\"] = 2] = \"ZOOM_MIN\";\n    CONST[CONST[\"LAT_MAX\"] = 85] = \"LAT_MAX\";\n})(CONST || (CONST = {}));\nclass MapLibraryComponent {\n    constructor(elem) {\n        this.elem = elem;\n        // input values\n        this.mapLat = 45;\n        this.mapLng = 5;\n        this.mapZoom = 5;\n        this.onchange = new EventEmitter();\n        this.onselect = new EventEmitter();\n        this.searchInputFocused = false;\n        this.moveMode = true;\n        this.handleIcon = \"move\";\n        this.handleMenuIcon = \"zoom\";\n        this.displayMenu = \"\";\n        this.choiseMenu = 1;\n        this.navigate = false;\n        this.navigateId = 0;\n        // display markers\n        this.mapMarkers = [];\n    }\n    ngAfterViewInit() {\n        // init map\n        this.initMap();\n        this.initInput();\n        this.setMoveShift();\n        // init display input request\n        this.setSearch(this.search);\n        this.setMarker(this.marker);\n        // send init event\n        setTimeout(() => {\n            this.sendModifications(\"\");\n        }, 2000);\n    }\n    initMap() {\n        // init map\n        this.map = map(\"map\", {\n            attributionControl: false,\n            zoomControl: false,\n            center: [this.mapLat, this.mapLng],\n            zoom: this.mapZoom,\n        });\n        // display map\n        tileLayer(\"https://{s}.tile.osm.org/{z}/{x}/{y}.png\").addTo(this.map);\n        // disable keyboard\n        this.map.keyboard.disable();\n        // add search box\n        this.geocoder = Control.geocoder({\n            position: \"topleft\",\n            collapsed: false,\n            placeholder: \"Recherche...\",\n            defaultMarkGeocode: true,\n        }).addTo(this.map);\n    }\n    setSearch(search) {\n        if (this.search) {\n            // load searching\n            this.geocoder.setQuery(search)._geocode();\n            // search the first element\n            setTimeout(() => {\n                if (this.geocoder._results && this.geocoder._results.length) {\n                    this.geocoder._geocodeResultSelected(this.geocoder._results[0]);\n                    this.geocoder._clearResults();\n                }\n            }, 2000);\n        }\n    }\n    setMarker(marker$1) {\n        this.cleanMarkers();\n        let i = 0;\n        marker$1.forEach(element => {\n            if (\"lat\" in element && \"lng\" in element) {\n                element.id = i;\n                if (!element.text && element.img) {\n                    this.mapMarkers[i] = this.generateImageMarker(element);\n                }\n                else if (!element.text) {\n                    this.mapMarkers[i] = marker([element.lat, element.lng]);\n                }\n                else {\n                    this.mapMarkers[i] = this.generateIconMarker(element);\n                }\n                this.mapMarkers[i].addTo(this.map);\n                if (this.navigate && this.mapLat == element.lat && this.mapLng == element.lng) {\n                    this.navigateId = i;\n                    this.elem.nativeElement.querySelector(\"#marker_\" + this.navigateId).style.background = \"orange\";\n                }\n                i++;\n            }\n        });\n    }\n    // remove all markers to display news\n    cleanMarkers() {\n        for (let i = 0; i < this.mapMarkers.length; i++) {\n            this.map.removeLayer(this.mapMarkers[i]);\n        }\n    }\n    // generate Marker\n    generateIconMarker(element) {\n        // set html form\n        let html = `\n      <div class=\"marker\" id=\"marker_${element.id}\">\n        <div>${element.text}</div>\n        ` + (element.content ? `<span>${element.content}</span>` : ``) +\n            (element.img ? `<img src=\"${element.img}\"/>` : ``) + `\n      </div>`;\n        // return leaflet marker\n        return new Marker([element.lat, element.lng], {\n            icon: new DivIcon({\n                className: '',\n                iconSize: [100, 70],\n                iconAnchor: [60, element.img ? 40 : 10],\n                html,\n            })\n        });\n    }\n    // generate image Marker\n    generateImageMarker(element) {\n        // set html form\n        let html = `<img id=\"marker_${element.id}\" style=\"width:80px;\" src=\"${element.img}\"/>`;\n        // return leaflet marker\n        return new Marker([element.lat, element.lng], {\n            icon: new DivIcon({\n                className: '',\n                iconSize: [80, 70],\n                iconAnchor: [45, element.img ? 40 : 10],\n                html,\n            })\n        });\n    }\n    /*************** components attributes events *************/\n    ngOnChanges(changes) {\n        if (this.map) {\n            switch (Object.keys(changes)[0]) {\n                case \"mapZoom\":\n                case \"mapLat\":\n                case \"mapLng\":\n                    this.map.setView([this.mapLat, this.mapLng], this.mapZoom);\n                    this.setMoveShift();\n                    break;\n                case \"marker\":\n                    this.setMarker(this.marker);\n                    break;\n                case \"search\":\n                    this.setSearch(this.search);\n                    break;\n            }\n        }\n    }\n    /*************** keyboard event detect and functions *************/\n    keyEvent(event) {\n        if (this.focused) {\n            if (this.displayMenu != \"\") {\n                this.handlingMenu(event.key);\n            }\n            else if (this.navigate) {\n                this.handlingNavigation(event.key);\n            }\n            else {\n                this.handlingMap(event.key);\n                // send change to parent application\n                this.sendModifications(event.key);\n            }\n        }\n    }\n    handlingNavigation(key) {\n        switch (key) {\n            case \"ArrowUp\":\n                this.navigateMarker(1, 0);\n                break;\n            case \"ArrowDown\":\n                this.navigateMarker(-1, 0);\n                break;\n            case \"ArrowRight\":\n                this.navigateMarker(0, 1);\n                break;\n            case \"ArrowLeft\":\n                this.navigateMarker(0, -1);\n                break;\n            case \"Enter\":\n                // send change to parent application\n                if (this.marker[this.navigateId])\n                    this.sendSelectEvent(this.marker[this.navigateId]);\n                break;\n            case \"Escape\":\n                this.openMenu();\n                break;\n        }\n    }\n    handlingMenu(key) {\n        switch (key) {\n            case \"ArrowRight\":\n                this.choiseMenu++;\n                if (this.choiseMenu > 4) {\n                    this.choiseMenu = 0;\n                }\n                break;\n            case \"ArrowLeft\":\n                this.choiseMenu--;\n                if (this.choiseMenu < 0) {\n                    this.choiseMenu = 4;\n                }\n                break;\n            case \"Enter\":\n                // reset navigation mode\n                this.navigate = false;\n                if (this.choiseMenu == 0) {\n                    this.setFocus();\n                }\n                else {\n                    this.setFocusOut();\n                }\n                if (this.choiseMenu == 1) {\n                    this.handleIcon = \"move\";\n                    this.moveMode = true;\n                }\n                else if (this.choiseMenu == 2) {\n                    this.handleIcon = \"zoom\";\n                    this.moveMode = false;\n                }\n                else if (this.choiseMenu == 3) {\n                    this.setNavigationMode();\n                }\n                else if (this.choiseMenu == 4) {\n                    alert(\"exit\");\n                }\n                this.closeMenu();\n                break;\n            case \"Escape\":\n                this.closeMenu();\n                break;\n        }\n    }\n    handlingMap(key) {\n        switch (key) {\n            case \"ArrowUp\":\n                if (this.moveMode) {\n                    if (this.map.getCenter().lat < CONST.LAT_MAX) {\n                        this.moveMap(1, 0);\n                    }\n                }\n                else {\n                    if (this.mapZoom < CONST.ZOOM_MAX) {\n                        this.zoomMap(1);\n                        this.moveShift /= 2;\n                    }\n                }\n                break;\n            case \"ArrowDown\":\n                if (this.moveMode) {\n                    if (this.map.getCenter().lat > -CONST.LAT_MAX) {\n                        this.moveMap(-1, 0);\n                    }\n                }\n                else {\n                    if (this.mapZoom > CONST.ZOOM_MIN) {\n                        this.zoomMap(-1);\n                        this.moveShift *= 2;\n                    }\n                }\n                break;\n            case \"ArrowRight\":\n                if (this.moveMode) {\n                    this.moveMap(0, 1);\n                }\n                else {\n                }\n                break;\n            case \"ArrowLeft\":\n                if (this.moveMode) {\n                    this.moveMap(0, -1);\n                }\n                else {\n                }\n                break;\n            case \"Enter\":\n                this.changeMode();\n                break;\n            case \"Escape\":\n                this.openMenu();\n                break;\n        }\n    }\n    // display move or zoom icon when press\n    changeMode() {\n        this.moveMode = !this.moveMode;\n        if (this.moveMode) {\n            this.handleIcon = \"move\";\n            this.choiseMenu = 1;\n        }\n        else {\n            this.handleIcon = \"zoom\";\n            this.choiseMenu = 2;\n        }\n    }\n    sendModifications(key) {\n        // calcul map outline by container size and pixel progection\n        let mapSize = this.map.getSize();\n        let centerPixel = this.map.project([this.mapLat, this.mapLng], this.mapZoom);\n        let topLeft = this.map.unproject([centerPixel.x - mapSize.x / 2, centerPixel.y - mapSize.y / 2], this.mapZoom);\n        let bottomRight = this.map.unproject([centerPixel.x + mapSize.x / 2, centerPixel.y + mapSize.y / 2], this.mapZoom);\n        // send coordinates results\n        this.onchange.emit({\n            key: key,\n            zoom: this.mapZoom,\n            lat: this.mapLat,\n            lng: this.mapLng,\n            view: {\n                top: topLeft.lat,\n                left: topLeft.lng,\n                bottom: bottomRight.lat,\n                right: bottomRight.lng\n            }\n        });\n    }\n    sendSelectEvent(selected) {\n        this.onselect.emit(selected);\n    }\n    /*************** escape app functions *************/\n    openMenu() {\n        this.displayMenu = \"show-menu\";\n    }\n    closeMenu() {\n        this.displayMenu = \"\";\n    }\n    // show escape message\n    selectMenu(key) {\n        if (key == \"Escape\") {\n            this.closeMenu();\n        }\n        else {\n            //this.validEscape = false;\n        }\n    }\n    /*************** navigate between markers *************/\n    setNavigationMode() {\n        this.navigate = true;\n        this.handleIcon = \"navigation\";\n        this.navigateMarker(0, 0);\n        // define menu to move\n        this.moveMode = false;\n        this.handleMenuIcon = \"move\";\n    }\n    navigateMarker(lat, lng) {\n        if (!this.marker.length) {\n            return;\n        }\n        if (this.marker.length == 1) {\n            this.navigateId = 0;\n            this.elem.nativeElement.querySelector(\"#marker_\" + this.navigateId).style.background = \"orange\";\n            return;\n        }\n        if (this.navigateId > this.marker.length) {\n            this.navigateId = 0;\n        }\n        if (lat != 0 || lng != 0) {\n            // reset previous\n            this.elem.nativeElement.querySelector(\"#marker_\" + this.marker[this.navigateId].id).style.background = \"white\";\n        }\n        // display new\n        if (lng > 0) {\n            this.findFirstRightElement();\n        }\n        else if (lng < 0) {\n            this.findFirstLeftElement();\n        }\n        else if (lat > 0) {\n            this.findFirstTopElement();\n        }\n        else if (lat < 0) {\n            this.findFirstBottomElement();\n        }\n        else {\n            this.navigateId = 0;\n        }\n        let el = this.marker[this.navigateId];\n        this.mapLat = el.lat;\n        this.mapLng = el.lng;\n        this.moveMap(0, 0);\n        this.sendModifications(\"\");\n    }\n    calcAngle(adjacent, opposite) {\n        return Math.atan(Math.abs(opposite) / Math.abs(adjacent)) * (180 / Math.PI);\n    }\n    calcHyp(adjacent, opposite) {\n        return Math.sqrt(Math.pow(adjacent, 2) + Math.pow(opposite, 2));\n        ;\n    }\n    findFirstLeftElement() {\n        let selected = this.marker[this.navigateId];\n        let newSelect = null;\n        this.marker.forEach(element => {\n            if (element != selected && element.lng < selected.lng && (newSelect == null || (element.lng > newSelect.lng || newSelect.lng > selected.lng))) {\n                let angle = this.calcAngle(element.lng - selected.lng, element.lat - selected.lat);\n                //console.log(element.text+\" \"+angle)\n                if (angle < 45) {\n                    newSelect = element;\n                }\n            }\n        });\n        if (newSelect == null || newSelect.lng >= selected.lng) {\n            this.navigateId = selected.id;\n        }\n        else {\n            this.navigateId = newSelect.id;\n        }\n    }\n    findFirstRightElement() {\n        let selected = this.marker[this.navigateId];\n        let newSelect = null;\n        this.marker.forEach(element => {\n            if (element != selected && element.lng > selected.lng && (newSelect == null || (element.lng < newSelect.lng || newSelect.lng < selected.lng))) {\n                let angle = this.calcAngle(element.lng - selected.lng, element.lat - selected.lat);\n                if (angle < 45) {\n                    newSelect = element;\n                }\n            }\n        });\n        if (newSelect == null || newSelect.lng <= selected.lng) {\n            this.navigateId = selected.id;\n        }\n        else {\n            this.navigateId = newSelect.id;\n        }\n    }\n    findFirstBottomElement() {\n        let selected = this.marker[this.navigateId];\n        let newSelect = this.marker[this.navigateId == 0 ? 1 : 0];\n        this.marker.forEach(element => {\n            if (element != selected && element.lat < selected.lat && (element.lat > newSelect.lat || newSelect.lat > selected.lat)) {\n                newSelect = element;\n            }\n        });\n        if (newSelect.lat >= selected.lat) {\n            this.navigateId = selected.id;\n        }\n        else {\n            this.navigateId = newSelect.id;\n        }\n    }\n    findFirstTopElement() {\n        let selected = this.marker[this.navigateId];\n        let newSelect = this.marker[this.navigateId == 0 ? 1 : 0];\n        this.marker.forEach(element => {\n            if (element != selected && element.lat > selected.lat && (element.lat < newSelect.lat || newSelect.lat < selected.lat)) {\n                newSelect = element;\n            }\n        });\n        if (newSelect.lat <= selected.lat) {\n            this.navigateId = selected.id;\n        }\n        else {\n            this.navigateId = newSelect.id;\n        }\n    }\n    /*************** set position, move and zoom functions *************/\n    // set new coordinates and handle zoom \n    setPosition() {\n        let coord = this.map.getCenter();\n        this.mapLat = coord.lat;\n        this.mapLng = coord.lng;\n        this.mapZoom = this.map.getZoom();\n        // calcul new move size\n        this.setMoveShift();\n    }\n    // calcul new coordinates\n    moveMap(lat, lng) {\n        this.mapLat += lat * this.moveShift;\n        this.mapLng += lng * this.moveShift;\n        this.map.setView([this.mapLat, this.mapLng], this.mapZoom);\n    }\n    // update zoom\n    zoomMap(zoom) {\n        this.mapZoom += zoom;\n        this.map.setZoom(this.mapZoom);\n    }\n    // alter move padding\n    setMoveShift() {\n        this.moveShift = 80;\n        for (let i = 1; i < this.mapZoom; i++) {\n            this.moveShift /= 2;\n        }\n    }\n    /*************** search input functions *************/\n    // set input focus or blur\n    initInput() {\n        // select search input box\n        this.searchInput = this.elem.nativeElement.querySelector(\".leaflet-control-geocoder-form input\");\n        this.searchBar = this.elem.nativeElement.querySelector(\".leaflet-bar\");\n        this.setFocusOut();\n    }\n    setFocus() {\n        this.searchBar.style.display = \"block\";\n        this.searchInput.focus();\n        this.searchInputFocused = true;\n    }\n    setFocusOut() {\n        this.searchInput.blur();\n        this.searchBar.style.display = \"none\";\n        this.searchInputFocused = false;\n        this.setPosition();\n    }\n}\nMapLibraryComponent.ɵfac = function MapLibraryComponent_Factory(t) { return new (t || MapLibraryComponent)(ɵɵdirectiveInject(ElementRef)); };\nMapLibraryComponent.ɵcmp = ɵɵdefineComponent({ type: MapLibraryComponent, selectors: [[\"map-library\"]], hostBindings: function MapLibraryComponent_HostBindings(rf, ctx) { if (rf & 1) {\n        ɵɵlistener(\"keyup\", function MapLibraryComponent_keyup_HostBindingHandler($event) { return ctx.keyEvent($event); }, false, ɵɵresolveWindow);\n    } }, inputs: { mapLat: \"mapLat\", mapLng: \"mapLng\", mapZoom: \"mapZoom\", search: \"search\", marker: \"marker\", focused: \"focused\" }, outputs: { onchange: \"onchange\", onselect: \"onselect\" }, features: [ɵɵNgOnChangesFeature], decls: 10, vars: 21, consts: [[1, \"map-container\"], [\"id\", \"map\"], [1, \"menu-container\"], [1, \"menu-box\"]], template: function MapLibraryComponent_Template(rf, ctx) { if (rf & 1) {\n        ɵɵelementStart(0, \"div\", 0);\n        ɵɵelement(1, \"i\");\n        ɵɵelement(2, \"div\", 1);\n        ɵɵelementEnd();\n        ɵɵelementStart(3, \"div\", 2);\n        ɵɵelementStart(4, \"div\", 3);\n        ɵɵelement(5, \"i\");\n        ɵɵelement(6, \"i\");\n        ɵɵelement(7, \"i\");\n        ɵɵelement(8, \"i\");\n        ɵɵelement(9, \"i\");\n        ɵɵelementEnd();\n        ɵɵelementEnd();\n    } if (rf & 2) {\n        ɵɵadvance(1);\n        ɵɵclassMapInterpolate1(\"icon \", ctx.handleIcon, \"\");\n        ɵɵadvance(2);\n        ɵɵclassMap(ctx.displayMenu);\n        ɵɵadvance(2);\n        ɵɵclassMapInterpolate1(\"icon search \", ctx.choiseMenu == 0 ? \"selected\" : \"\", \"\");\n        ɵɵadvance(1);\n        ɵɵclassMapInterpolate1(\"icon move \", ctx.choiseMenu == 1 ? \"selected\" : \"\", \"\");\n        ɵɵadvance(1);\n        ɵɵclassMapInterpolate1(\"icon zoom \", ctx.choiseMenu == 2 ? \"selected\" : \"\", \"\");\n        ɵɵadvance(1);\n        ɵɵclassMapInterpolate1(\"icon navigation \", ctx.choiseMenu == 3 ? \"selected\" : \"\", \"\");\n        ɵɵadvance(1);\n        ɵɵclassMapInterpolate1(\"icon logout \", ctx.choiseMenu == 4 ? \"selected\" : \"\", \"\");\n    } }, styles: [\".map-container[_ngcontent-%COMP%]{position:absolute;z-index:1;top:0;left:0;right:0;bottom:0}#map[_ngcontent-%COMP%]{width:100%;height:100%}.map-container[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{position:absolute;z-index:1000;top:10px;right:10px;width:50px;height:50px}.menu-container[_ngcontent-%COMP%]{position:absolute;z-index:1001;top:0;left:0;width:100%;height:100%;background-color:rgba(0,0,0,.3);display:none}.menu-box[_ngcontent-%COMP%]{position:absolute;top:calc(50% - 100px);left:calc(50% - 375px);width:750px;height:150px;background-color:#fff;border:1px solid orange!important;text-align:center;margin-top:50px}.menu-box[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{display:inline-block;width:150px;height:150px;border:0;border-radius:3px;background-size:100px 100px;background-repeat:no-repeat;background-position:center}.menu-box[_ngcontent-%COMP%]   .selected[_ngcontent-%COMP%]{background-color:orange}.show-menu[_ngcontent-%COMP%]{display:block}\"] });\n/*@__PURE__*/ (function () { ɵsetClassMetadata(MapLibraryComponent, [{\n        type: Component,\n        args: [{\n                selector: \"map-library\",\n                inputs: ['mapLat', 'mapLng', 'mapZoom', 'search', 'marker', 'focused'],\n                templateUrl: \"./map-library.component.html\",\n                styleUrls: [\"./map-library.component.css\",],\n            }]\n    }], function () { return [{ type: ElementRef }]; }, { onchange: [{\n            type: Output\n        }], onselect: [{\n            type: Output\n        }], keyEvent: [{\n            type: HostListener,\n            args: [\"window:keyup\", [\"$event\"]]\n        }] }); })();\n\nclass MapLibraryModule {\n}\nMapLibraryModule.ɵmod = ɵɵdefineNgModule({ type: MapLibraryModule });\nMapLibraryModule.ɵinj = ɵɵdefineInjector({ factory: function MapLibraryModule_Factory(t) { return new (t || MapLibraryModule)(); }, imports: [[]] });\n(function () { (typeof ngJitMode === \"undefined\" || ngJitMode) && ɵɵsetNgModuleScope(MapLibraryModule, { declarations: [MapLibraryComponent], exports: [MapLibraryComponent] }); })();\n/*@__PURE__*/ (function () { ɵsetClassMetadata(MapLibraryModule, [{\n        type: NgModule,\n        args: [{\n                declarations: [MapLibraryComponent],\n                imports: [],\n                exports: [MapLibraryComponent]\n            }]\n    }], null, null); })();\n\n/*\n * Public API Surface of map-library\n */\n\n/**\n * Generated bundle index. Do not edit.\n */\n\nexport { CONST, MapLibraryComponent, MapLibraryModule, MapLibraryService };\n//# sourceMappingURL=map-library.js.map\n","import { AfterViewInit, Component, ElementRef, HostListener } from '@angular/core';\nimport * as cities from '../assets/commune.json';\n\n\ndeclare var EXIF: any;\n\n@Component({\n  selector: 'app-root',\n\n  templateUrl: './app.component.html',\n  styleUrls: ['./app.component.css'],\n})\nexport class AppComponent implements AfterViewInit {\n  title = 'map-application';\n\n  // component values\n  public mapLat: number = 45;\n  public mapLng: number = 5;\n  public mapZoom: number = 6;\n  public search: String = '';\n  public marker: any = [];\n  public focused: boolean = true;\n\n  private imageTab: any = [];\n  private infobox;\n\n  constructor(private elem: ElementRef) { }\n\n  ngAfterViewInit(): void {\n\n    this.infobox = this.elem.nativeElement.querySelector(\"#infobox\");\n\n    setTimeout(()=>{\n      // get gps metadata and display infos of paris\n      for(let i=1; i<7; i++){\n        this.getExif(\"../assets/\"+i+\".jpg\");\n      }      \n    },200)\n    /*setTimeout(()=>{\n      this.displayInfos({text: \"Paris\", content: \"<span style='color:blue'>12°c</span> - <span style='color:green'>28°c</span>\", img: \"../assets/partly_cloudy.png\", lat: 48.86, lng: 2.34445});\n    },2200)*/\n  }\n\n  /******************************* map component's events *******************/\n  onMapSelect(selected) {\n    console.log(selected);\n    this.displayInfos(selected);\n  }\n  \n  onMapChange(event) {\n    //console.log(event);\n    this.displayCities(event);\n    \n  }\n\n  /******************************* display images and infos *******************/\n  displayInfos(element){\n    this.focused=false;\n    this.infobox.style.display = 'block';\n\n    let images = \"\";\n    this.imageTab.forEach(el => {\n      if(element.lat > el.lat-0.5 && element.lat < el.lat+0.5 && element.lng > el.lng-0.5 && element.lng < el.lng+0.5){\n        images += `\n        <div class=\"imgContainer\">\n          <div>\n            <img src=\"${el.img}\">\n          </div>\n        </div>\n        `;\n      }\n    });\n    \n    this.infobox.innerHTML = ` \n    <div class=\"col wheather\">\n      <h2>${element.text}</h2>\n        <div class=\"wheatherInfo\">\n          <img src=\"${element.img}\"/>\n          <div class=\"content\">${element.content}</div>\n        </div>\n    </div>\n    <div class=\"col thumb\">${images}</div>\n    `;\n  }\n  hideInfos(){\n    this.infobox.style.display = 'none';\n    setTimeout(()=>{ this.focused=true; },10)\n  }\n\n  /******************************* keyboard event *******************/\n  @HostListener(\"window:keyup\", [\"$event\"])\n  keyEvent(event: KeyboardEvent) {\n    if(!this.focused){\n      this.handlingNavigation(event.key);\n    }\n  }\n\n  private handlingNavigation(key): void {\n    console.log(key)\n    switch (key) {\n      case \"ArrowUp\":\n        break;\n      case \"ArrowDown\":\n        break;\n      case \"ArrowRight\":\n        break;\n      case \"ArrowLeft\":\n        break;\n      case \"Enter\":\n        break;\n      case \"Escape\":\n        this.hideInfos();\n        break;\n    }\n  }\n\n  /******************************* display cities weather *******************/\n  displayCities(event){\n\n    let tab=[]\n    cities['cities'].forEach(element => {\n      if(element.zoom <= event.zoom && element.latitude < event.view.top && element.latitude > event.view.bottom && element.longitude < event.view.right && element.longitude > event.view.left){\n        tab.push({ text: element.city, content:\"<span style='color:blue'>12°c</span> - <span style='color:green'>28°c</span>\", img: \"../assets/partly_cloudy.png\", lat: element.latitude, lng: element.longitude })\n      }\n    });\n    this.marker = tab;\n  }\n\n  /******************************* get image gps data *******************/\n  getExif(imgUrl) {\n    var self=this;\n    this.getImageFromImageUrl(imgUrl, (image)=>{    \n      EXIF.getData(image, function(){\n        let imgLat = EXIF.getTag(this,'GPSLatitude')\n        let imgLng = EXIF.getTag(this,'GPSLongitude')\n        // convert from deg/min/sec to decimal for Google\n        var strLatRef = EXIF.getTag(this, \"GPSLatitudeRef\") || \"N\";\n        var strLongRef = EXIF.getTag(this, \"GPSLongitudeRef\") || \"W\";\n        var fLat = (imgLat[0] + imgLat[1]/60 + imgLat[2]/3600) * (strLatRef == \"N\" ? 1 : -1);\n        var fLng = (imgLng[0] + imgLng[1]/60 + imgLng[2]/3600) * (strLongRef == \"W\" ? -1 : 1);\n        // add image to markers\n        //self.addMarker({ img: imgUrl, lat: fLat, lng: fLng });\n        self.imageTab.push({ img: imgUrl, lat: fLat, lng: fLng })\n        console.log(self.imageTab)\n      });\n    });\n  }\n\n  // display image directly\n  addMarker(element){\n    let tab=[]\n    this.marker.forEach(el => { tab.push(el); });\n    tab.push(element)\n    this.marker = tab\n  }\n  \n  getImageFromImageUrl(url, callback) {\n    var img = new Image();\n    img.setAttribute('crossOrigin', 'anonymous');\n    img.onload = function () {\n        callback(img);\n    };\n    img.src = url;\n  }\n\n  toDataURL(url, callback){\n    var xhr = new XMLHttpRequest();\n    xhr.open('get', url);\n    xhr.responseType = 'blob';\n    xhr.onload = function(){\n      var fr = new FileReader();\n      fr.onload = function(){\n        callback(this.result);\n      };\n      fr.readAsDataURL(xhr.response); // async call\n    };\n    xhr.send();\n  }\n\n}\n","<map-library \n    [mapLat]=\"mapLat\" \n    [mapLng]=\"mapLng\" \n    [mapZoom]=\"mapZoom\" \n    [search]=\"search\" \n    [marker]=\"marker\"\n    [focused]=\"focused\"\n    (onchange)=\"onMapChange($event)\"\n    (onselect)=\"onMapSelect($event)\">\n</map-library>\n\n<div id=\"infobox\"></div>","import { BrowserModule } from '@angular/platform-browser';\nimport { NgModule } from '@angular/core';\n\nimport { MapLibraryModule } from 'map-library';\n\nimport { AppComponent } from './app.component';\nimport { WeatherComponent } from './weather/weather.component';\n\n@NgModule({\n  declarations: [\n    AppComponent,\n    WeatherComponent,\n  ],\n  imports: [\n    BrowserModule,\n    MapLibraryModule\n  ],\n  providers: [],\n  bootstrap: [AppComponent]\n})\nexport class AppModule { }\n","import { Component, OnInit } from '@angular/core';\n\n@Component({\n  selector: 'app-weather',\n  templateUrl: './weather.component.html',\n  styleUrls: ['./weather.component.css']\n})\nexport class WeatherComponent implements OnInit {\n  WeatherData:any;\n  weather =[]\n  constructor() { }\n\n  ngOnInit(){\n    this.getWeatherData();\n  }\n  getWeatherData(){\n    fetch('http://api.openweathermap.org/data/2.5/group?id=6452235,6454924,2995469&units=metric&appid=39f7af91a4b080cd1fdef1f8e81062e7')\n    .then(response=>response.json)\n    .then(data=>{this.setWeatherData(data);}) \n    \n  }\n  setWeatherData(data){\n    this.WeatherData = data;\n    for (let item of (this.WeatherData.list)){\n      this.weather.push(item.main.temp);\n    }\n      \n  }\n    \n\n}\n","<p>weather works!</p>\ngi","// This file can be replaced during build by using the `fileReplacements` array.\n// `ng build --prod` replaces `environment.ts` with `environment.prod.ts`.\n// The list of file replacements can be found in `angular.json`.\n\nexport const environment = {\n  production: true\n};\n\n/*\n * For easier debugging in development mode, you can import the following file\n * to ignore zone related error stack frames such as `zone.run`, `zoneDelegate.invokeTask`.\n *\n * This import should be commented out in production mode because it will have a negative impact\n * on performance if an error is thrown.\n */\n// import 'zone.js/dist/zone-error';  // Included with Angular CLI.\n","import { enableProdMode } from '@angular/core';\nimport { platformBrowserDynamic } from '@angular/platform-browser-dynamic';\n\nimport { AppModule } from './app/app.module';\nimport { environment } from './environments/environment';\n\nif (environment.production) {\n  enableProdMode();\n}\n\nplatformBrowserDynamic().bootstrapModule(AppModule)\n  .catch(err => console.error(err));\n"]}